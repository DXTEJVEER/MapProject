"use strict";var se=Object.defineProperty,ie=Object.defineProperties,re=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,te=(A,P,u)=>P in A?se(A,P,{enumerable:!0,configurable:!0,writable:!0,value:u}):A[P]=u,J=(A,P)=>{for(var u in P||(P={}))oe.call(P,u)&&te(A,u,P[u]);if(ee)for(var u of ee(P))ae.call(P,u)&&te(A,u,P[u]);return A},ne=(A,P)=>ie(A,re(P));(self.webpackChunkbeachSports=self.webpackChunkbeachSports||[]).push([[4079],{36592:(A,P,u)=>{u.d(P,{Q:()=>F});var x=u(85931),L=u(62208),C=u(77029),b=u(14259);class F{constructor(t=9,i){this.compareMinX=T,this.compareMinY=y,this._toBBox=r=>r,this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&("function"==typeof i?this._toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),W.prune(),K.prune(),S.prune(),G.prune()}all(t){this._all(this.data,t)}search(t,i){let r=this.data;const d=this._toBBox;if(Z(t,r))for(W.clear();r;){for(let e=0,n=r.children.length;e<n;e++){const s=r.children[e],a=r.leaf?d(s):s;Z(t,a)&&(r.leaf?i(s):M(t,a)?this._all(s,i):W.push(s))}r=W.pop()}}collides(t){let i=this.data;const r=this._toBBox;if(!Z(t,i))return!1;for(W.clear();i;){for(let d=0,e=i.children.length;d<e;d++){const n=i.children[d],s=i.leaf?r(n):n;if(Z(t,s)){if(i.leaf||M(t,s))return!0;W.push(n)}}i=W.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let r=0,d=t.length;r<d;r++)this.insert(t[r]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new l([]),this}remove(t){var a;if(!t)return this;let i,r=this.data,d=null,e=0,n=!1;const s=this._toBBox(t);for(S.clear(),G.clear();r||S.length>0;){if(r||(r=(0,L.j0)(S.pop()),d=S.data[S.length-1],e=null!=(a=G.pop())?a:0,n=!0),r.leaf&&(i=(0,x.cq)(r.children,t,r.children.length,r.indexHint),-1!==i))return r.children.splice(i,1),S.push(r),this._condense(S),this;n||r.leaf||!M(r,s)?d?(e++,r=d.children[e],n=!1):r=null:(S.push(r),G.push(e),e=0,d=r,r=r.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){var d;let r=t;for(K.clear();r;){if(!0===r.leaf)for(const e of r.children)i(e);else K.pushArray(r.children);r=null!=(d=K.pop())?d:null}}_build(t,i,r,d){const e=r-i+1;let n=this._maxEntries;if(e<=n){const B=new l(t.slice(i,r+1));return E(B,this._toBBox),B}d||(d=Math.ceil(Math.log(e)/Math.log(n)),n=Math.ceil(e/n**(d-1)));const s=new p([]);s.height=d;const a=Math.ceil(e/n),m=a*Math.ceil(Math.sqrt(n));z(t,i,r,m,this.compareMinX);for(let B=i;B<=r;B+=m){const D=Math.min(B+m-1,r);z(t,B,D,a,this.compareMinY);for(let O=B;O<=D;O+=a){const U=Math.min(O+a-1,D);s.children.push(this._build(t,O,U,d-1))}}return E(s,this._toBBox),s}_chooseSubtree(t,i,r,d){for(;d.push(i),!0!==i.leaf&&d.length-1!==r;){let e,n=1/0,s=1/0;for(let a=0,m=i.children.length;a<m;a++){const B=i.children[a],D=f(B),O=g(t,B)-D;O<s?(s=O,n=D<n?D:n,e=B):O===s&&D<n&&(n=D,e=B)}i=e||i.children[0]}return i}_insert(t,i,r){const e=r?t:(0,this._toBBox)(t);S.clear();const n=this._chooseSubtree(e,this.data,i,S);for(n.children.push(t),R(n,e);i>=0&&S.data[i].children.length>this._maxEntries;)this._split(S,i),i--;this._adjustParentBBoxes(e,S,i)}_split(t,i){const r=t.data[i],d=r.children.length,e=this._minEntries;this._chooseSplitAxis(r,e,d);const n=this._chooseSplitIndex(r,e,d);if(!n)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const s=r.children.splice(n,r.children.length-n),a=r.leaf?new l(s):new p(s);a.height=r.height,E(r,this._toBBox),E(a,this._toBBox),i?t.data[i-1].children.push(a):this._splitRoot(r,a)}_splitRoot(t,i){this.data=new p([t,i]),this.data.height=t.height+1,E(this.data,this._toBBox)}_chooseSplitIndex(t,i,r){let d,e,n;d=e=1/0;for(let s=i;s<=r-i;s++){const a=j(t,0,s,this._toBBox),m=j(t,s,r,this._toBBox),B=v(a,m),D=f(a)+f(m);B<d?(d=B,n=s,e=D<e?D:e):B===d&&D<e&&(e=D,n=s)}return n}_chooseSplitAxis(t,i,r){const d=t.leaf?this.compareMinX:T,e=t.leaf?this.compareMinY:y;this._allDistMargin(t,i,r,d)<this._allDistMargin(t,i,r,e)&&t.children.sort(d)}_allDistMargin(t,i,r,d){t.children.sort(d);const e=this._toBBox,n=j(t,0,i,e),s=j(t,r-i,r,e);let a=h(n)+h(s);for(let m=i;m<r-i;m++){const B=t.children[m];R(n,t.leaf?e(B):B),a+=h(n)}for(let m=r-i-1;m>=i;m--){const B=t.children[m];R(s,t.leaf?e(B):B),a+=h(s)}return a}_adjustParentBBoxes(t,i,r){for(let d=r;d>=0;d--)R(i.data[d],t)}_condense(t){for(let i=t.length-1;i>=0;i--){const r=t.data[i];if(0===r.children.length)if(i>0){const d=t.data[i-1],e=d.children;e.splice((0,x.cq)(e,r,e.length,d.indexHint),1)}else this.clear();else E(r,this._toBBox)}}_initFormat(t){const i=["return a"," - b",";"];this.compareMinX=new Function("a","b",i.join(t[0])),this.compareMinY=new Function("a","b",i.join(t[1])),this._toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}function E(o,t){j(o,0,o.children.length,t,o)}function j(o,t,i,r,d){d||(d=new l([])),d.minX=1/0,d.minY=1/0,d.maxX=-1/0,d.maxY=-1/0;for(let e,n=t;n<i;n++)e=o.children[n],R(d,o.leaf?r(e):e);return d}function R(o,t){o.minX=Math.min(o.minX,t.minX),o.minY=Math.min(o.minY,t.minY),o.maxX=Math.max(o.maxX,t.maxX),o.maxY=Math.max(o.maxY,t.maxY)}function T(o,t){return o.minX-t.minX}function y(o,t){return o.minY-t.minY}function f(o){return(o.maxX-o.minX)*(o.maxY-o.minY)}function h(o){return o.maxX-o.minX+(o.maxY-o.minY)}function g(o,t){return(Math.max(t.maxX,o.maxX)-Math.min(t.minX,o.minX))*(Math.max(t.maxY,o.maxY)-Math.min(t.minY,o.minY))}function v(o,t){const i=Math.max(o.minX,t.minX),r=Math.max(o.minY,t.minY),d=Math.min(o.maxX,t.maxX),e=Math.min(o.maxY,t.maxY);return Math.max(0,d-i)*Math.max(0,e-r)}function M(o,t){return o.minX<=t.minX&&o.minY<=t.minY&&t.maxX<=o.maxX&&t.maxY<=o.maxY}function Z(o,t){return t.minX<=o.maxX&&t.minY<=o.maxY&&t.maxX>=o.minX&&t.maxY>=o.minY}function z(o,t,i,r,d){const e=[t,i];for(;e.length;){const n=(0,L.j0)(e.pop()),s=(0,L.j0)(e.pop());if(n-s<=r)continue;const a=s+Math.ceil((n-s)/r/2)*r;(0,b.q)(o,a,s,n,d),e.push(s,a,a,n)}}const W=new C.Z,K=new C.Z,S=new C.Z,G=new C.Z({deallocator:void 0});class c extends class _{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}{constructor(){super(...arguments),this.height=1,this.indexHint=new x.SO}}class l extends c{constructor(t){super(),this.children=t,this.leaf=!0}}class p extends c{constructor(t){super(),this.children=t,this.leaf=!1}}},61256:(A,P,u)=>{u.d(P,{H:()=>R});var x=u(8314),L=u(36592),C=u(65401);const F={minX:0,minY:0,maxX:0,maxY:0};class R{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new L.Q(9,(0,x.Z)("esri-csp-restrictions")?y=>({minX:y[0],minY:y[1],maxX:y[2],maxY:y[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const y=new Array(this._idByBounds.size);let f=0;this._idByBounds.forEach((h,g)=>{y[f++]=g}),this._indexInvalid=!1,this._index.clear(),this._index.load(y)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(y=>this._idByBounds.has(y))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const y=(0,C.cS)();for(const f of this._boundsById.values())f&&(y[0]=Math.min(f[0],y[0]),y[1]=Math.min(f[1],y[1]),y[2]=Math.max(f[2],y[2]),y[3]=Math.max(f[3],y[3]));return y}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(y){const f=this._boundsById.get(y);this._boundsById.delete(y),f&&(this._idByBounds.delete(f),this._indexInvalid||this._index.remove(f))}forEachInBounds(y,f){this._loadIndex(),function j(T,y,f){(function E(T){F.minX=T[0],F.minY=T[1],F.maxX=T[2],F.maxY=T[3]})(y),T.search(F,f)}(this._index,y,h=>f(this._idByBounds.get(h)))}get(y){return this._boundsById.get(y)}has(y){return this._boundsById.has(y)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(y,f){if(!this._indexInvalid){const h=this._boundsById.get(y);h&&(this._index.remove(h),this._idByBounds.delete(h))}this._boundsById.set(y,f),f&&(this._idByBounds.set(f,y),this._indexInvalid||(this._boundsToLoad.push(f),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},3579:(A,P,u)=>{u.d(P,{Z:()=>y});var x=u(26584),L=u(61885),C=u(63290),b=u(62208),F=u(5548),E=u(65401),j=u(82054),R=u(61256),T=u(92794);class y{constructor(h){this.geometryInfo=h,this._boundsStore=new R.H,this._featuresById=new Map,this._markedIds=new Set,this.events=new L.Z,this.featureAdapter=T.n}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let h=0;return this._featuresById.forEach(g=>{(0,b.pC)(g.geometry)&&g.geometry.coords&&(h+=g.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:h/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(h){this._add(h),this._emitChanged()}addMany(h){for(const g of h)this._add(g);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(h){const g=this._featuresById.get(h);return g?(this._remove(g),this._emitChanged(),g):null}removeManyById(h){this._boundsStore.invalidateIndex();for(const g of h){const v=this._featuresById.get(g);v&&this._remove(v)}this._emitChanged()}forEachBounds(h,g,v){for(const M of h){const Z=this._boundsStore.get(M.objectId);Z&&g((0,F.JR)(v,Z))}}getFeature(h){return this._featuresById.get(h)}has(h){return this._featuresById.has(h)}toArray(){return Array.from(this._featuresById.values())}forEach(h){this._featuresById.forEach(g=>h(g))}forEachInBounds(h,g){this._boundsStore.forEachInBounds(h,v=>{g(this._featuresById.get(v))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let h=!1;this._featuresById.forEach((g,v)=>{this._markedIds.has(v)||(h=!0,this._remove(g))}),this._markedIds.clear(),h&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(h){if(!h)return;const g=h.objectId;if(null==g)return void C.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new x.Z("featurestore:invalid-feature","feature id is missing",{feature:h}));const v=this._featuresById.get(g);let M;if(this._markedIds.add(g),v?(h.displayId=v.displayId,M=this._boundsStore.get(g),this._boundsStore.delete(g)):(0,b.pC)(this.onFeatureAdd)&&this.onFeatureAdd(h),(0,b.Wi)(h.geometry)||!h.geometry.coords||!h.geometry.coords.length)return this._boundsStore.set(g,null),void this._featuresById.set(g,h);M=(0,j.$)((0,b.pC)(M)?M:(0,E.Ue)(),h.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),(0,b.pC)(M)&&this._boundsStore.set(g,M),this._featuresById.set(g,h)}_remove(h){return(0,b.pC)(this.onFeatureRemove)&&this.onFeatureRemove(h),this._markedIds.delete(h.objectId),this._boundsStore.delete(h.objectId),this._featuresById.delete(h.objectId),h}}},92794:(A,P,u)=>{u.d(P,{n:()=>F});var x=u(62208),L=u(77044),C=u(66385),b=u(88071);const F={getObjectId:E=>E.objectId,getAttributes:E=>E.attributes,getAttribute:(E,j)=>E.attributes[j],cloneWithGeometry:(E,j)=>new C.u_(j,E.attributes,null,E.objectId),getGeometry:E=>E.geometry,getCentroid:(E,j)=>((0,x.Wi)(E.centroid)&&(E.centroid=(0,L.Y)(new b.Z,E.geometry,j.hasZ,j.hasM)),E.centroid)}},84079:(A,P,u)=>{u.r(P),u.d(P,{default:()=>S});var x=u(15861),L=u(84792),C=u(26584),b=u(63290),F=u(62208),E=u(10699),j=u(91179),R=u(37053),T=u(82054),y=u(3579),f=u(82959),h=u(58175),g=u(58775),v=u(56554),M=u(35775),Z=u(60466),z=u(85),W=u(36630);const K={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};class S{constructor(){var _=this;this._queryEngine=null,this._snapshotFeatures=function(){var c=(0,x.Z)(function*(l){const p=yield _._fetch(l);return _._createFeatures(p)});return function(l){return c.apply(this,arguments)}}()}destroy(){var _;null==(_=this._queryEngine)||_.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}load(_,c={}){var l=this;return(0,x.Z)(function*(){l.loadOptions={url:_.url,customParameters:_.customParameters};const p=[];yield l._checkProjection(_.spatialReference);let o=null;_.url&&(o=yield l._fetch(null==c?void 0:c.signal));const t=(0,g.my)(o,{geometryType:_.geometryType}),i=_.fields||t.fields||[],r=null!=_.hasZ?_.hasZ:t.hasZ,d=t.geometryType,e=_.objectIdField||t.objectIdFieldName||"__OBJECTID",n=_.spatialReference||R.Zn;let s=_.timeInfo;i===t.fields&&t.unknownFields.length>0&&p.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:t.unknownFields}});let a=i.find(I=>I.name===e);a?("esriFieldTypeString"!==a.type&&(a.type="esriFieldTypeOID"),a.editable=!1,a.nullable=!1):(a={alias:e,name:e,type:"string"===t.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},i.unshift(a));const m={};for(const I of i){if(null==I.name&&(I.name=I.alias),null==I.alias&&(I.alias=I.name),!I.name)throw new C.Z("geojson-layer:invalid-field-name","field name is missing",{field:I});if(!z.v.jsonValues.includes(I.type))throw new C.Z("geojson-layer:invalid-field-type",`invalid type for field "${I.name}"`,{field:I});if(I.name!==a.name){const Y=(0,W.os)(I);void 0!==Y&&(m[I.name]=Y)}}l._fieldsIndex=new Z.Z(i);const B=l._fieldsIndex.requiredFields.indexOf(a);if(B>-1&&l._fieldsIndex.requiredFields.splice(B,1),s){if(s.startTimeField){const I=l._fieldsIndex.get(s.startTimeField);I?(s.startTimeField=I.name,I.type="esriFieldTypeDate"):s.startTimeField=null}if(s.endTimeField){const I=l._fieldsIndex.get(s.endTimeField);I?(s.endTimeField=I.name,I.type="esriFieldTypeDate"):s.endTimeField=null}if(s.trackIdField){const I=l._fieldsIndex.get(s.trackIdField);I?s.trackIdField=I.name:(s.trackIdField=null,p.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:s}}))}s.startTimeField||s.endTimeField||(p.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:s}}),s=null)}const D=d?(0,v.bU)(d):null,O={warnings:p,featureErrors:[],layerDefinition:ne(J({},K),{drawingInfo:D,templates:(0,v.Hq)(m),extent:null,geometryType:d,objectIdField:e,fields:i,hasZ:!!r,timeInfo:s})};l._queryEngine=new h.q({fields:i,geometryType:d,hasM:!1,hasZ:r,objectIdField:e,spatialReference:n,timeInfo:s,featureStore:new y.Z({geometryType:d,hasM:!1,hasZ:r}),cacheSpatialQueries:!0}),l._createDefaultAttributes=(0,v.Dm)(m,e);const U=yield l._createFeatures(o);l._objectIdGenerator=l._createObjectIdGenerator(l._queryEngine,U);const w=l._normalizeFeatures(U,O.warnings,O.featureErrors);if(l._queryEngine.featureStore.addMany(w),O.layerDefinition.extent=l._queryEngine.fullExtent,O.layerDefinition.timeInfo){const{start:I,end:Y}=l._queryEngine.timeExtent;O.layerDefinition.timeInfo.timeExtent=[I,Y]}return O})()}applyEdits(_){var c=this;return(0,x.Z)(function*(){const{spatialReference:l,geometryType:p}=c._queryEngine;return yield Promise.all([(0,M.b)(l,p),(0,f._W)(_.adds,l),(0,f._W)(_.updates,l)]),yield c._waitSnapshotComplete(),c._applyEdits(_)})()}queryFeatures(_={},c={}){var l=this;return(0,x.Z)(function*(){return yield l._waitSnapshotComplete(),l._queryEngine.executeQuery(_,c.signal)})()}queryFeatureCount(_={},c={}){var l=this;return(0,x.Z)(function*(){return yield l._waitSnapshotComplete(),l._queryEngine.executeQueryForCount(_,c.signal)})()}queryObjectIds(_={},c={}){var l=this;return(0,x.Z)(function*(){return yield l._waitSnapshotComplete(),l._queryEngine.executeQueryForIds(_,c.signal)})()}queryExtent(_={},c={}){var l=this;return(0,x.Z)(function*(){return yield l._waitSnapshotComplete(),l._queryEngine.executeQueryForExtent(_,c.signal)})()}querySnapping(_,c={}){var l=this;return(0,x.Z)(function*(){return yield l._waitSnapshotComplete(),l._queryEngine.executeQueryForSnapping(_,c.signal)})()}refresh(_){var c=this;return(0,x.Z)(function*(){var l;return c.loadOptions.customParameters=_,null==(l=c._snapshotTask)||l.abort(),c._snapshotTask=(0,E.vr)(c._snapshotFeatures),c._snapshotTask.promise.then(p=>{c._queryEngine.featureStore.clear(),c._objectIdGenerator=c._createObjectIdGenerator(c._queryEngine,p);const o=c._normalizeFeatures(p);o&&c._queryEngine.featureStore.addMany(o)},p=>{c._queryEngine.featureStore.clear(),(0,E.D_)(p)||b.Z.getLogger("esri.layers.GeoJSONLayer").error(new C.Z("geojson-layer:refresh","An error occurred during refresh",{error:p}))}),yield c._waitSnapshotComplete(),{extent:c._queryEngine.fullExtent,timeExtent:c._queryEngine.timeExtent}})()}_createFeatures(_){var c=this;return(0,x.Z)(function*(){const{geometryType:l,hasZ:p,objectIdField:o}=c._queryEngine,t=(0,g.lG)(_,{geometryType:l,hasZ:p,objectIdField:o});if(!(0,R.fS)(c._queryEngine.spatialReference,R.Zn))for(const i of t)(0,F.pC)(i.geometry)&&(i.geometry=(0,T.GH)((0,f.iV)((0,T.di)(i.geometry,c._queryEngine.geometryType,c._queryEngine.hasZ,!1),R.Zn,c._queryEngine.spatialReference)));return t})()}_waitSnapshotComplete(){var _=this;return(0,x.Z)(function*(){if(_._snapshotTask&&!_._snapshotTask.finished){try{yield _._snapshotTask.promise}catch(c){}return _._waitSnapshotComplete()}})()}_fetch(_){var c=this;return(0,x.Z)(function*(){const{url:l,customParameters:p}=c.loadOptions,o=(yield(0,L.default)(l,{responseType:"json",query:J({},p),signal:_})).data;return yield(0,g.O3)(o),o})()}_normalizeFeatures(_,c,l){const{objectIdField:p}=this._queryEngine,o=[];for(const t of _){const i=this._createDefaultAttributes(),r=(0,M.O0)(this._fieldsIndex,i,t.attributes,!0,c);r?null==l||l.push(r):(this._assignObjectId(i,t.attributes,!0),t.attributes=i,t.objectId=i[p],o.push(t))}return o}_applyEdits(_){const{adds:c,updates:l,deletes:p}=_,o={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(c&&c.length&&this._applyAddEdits(o,c),l&&l.length&&this._applyUpdateEdits(o,l),p&&p.length){for(const t of p)o.deleteResults.push((0,M.d1)(t));this._queryEngine.featureStore.removeManyById(p)}return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:o}}_applyAddEdits(_,c){const{addResults:l}=_,{geometryType:p,hasM:o,hasZ:t,objectIdField:i,spatialReference:r,featureStore:d}=this._queryEngine,e=[];for(const n of c){if(n.geometry&&p!==(0,j.Ji)(n.geometry)){l.push((0,M.av)("Incorrect geometry type."));continue}const s=this._createDefaultAttributes(),a=(0,M.O0)(this._fieldsIndex,s,n.attributes);a?l.push(a):(this._assignObjectId(s,n.attributes),n.attributes=s,null!=n.uid&&(_.uidToObjectId[n.uid]=n.attributes[i]),(0,F.pC)(n.geometry)&&(n.geometry=(0,f.iV)((0,M.og)(n.geometry,r),n.geometry.spatialReference,r)),e.push(n),l.push((0,M.d1)(n.attributes[i])))}d.addMany((0,T.Yn)([],e,p,t,o,i))}_applyUpdateEdits({updateResults:_},c){const{geometryType:l,hasM:p,hasZ:o,objectIdField:t,spatialReference:i,featureStore:r}=this._queryEngine;for(const d of c){const{attributes:e,geometry:n}=d,s=e&&e[t];if(null==s){_.push((0,M.av)(`Identifier field ${t} missing`));continue}if(!r.has(s)){_.push((0,M.av)(`Feature with object id ${s} missing`));continue}const a=(0,T.EI)(r.getFeature(s),l,o,p);if((0,F.pC)(n)){if(l!==(0,j.Ji)(n)){_.push((0,M.av)("Incorrect geometry type."));continue}a.geometry=(0,f.iV)((0,M.og)(n,i),n.spatialReference,i)}if(e){const m=(0,M.O0)(this._fieldsIndex,a.attributes,e);if(m){_.push(m);continue}}r.add((0,T.XA)(a,l,o,p,t)),_.push((0,M.d1)(s))}}_createObjectIdGenerator(_,c){const l=_.fieldsIndex.get(_.objectIdField);if("esriFieldTypeString"===l.type)return()=>l.name+"-"+Date.now().toString(16);let p=Number.NEGATIVE_INFINITY;for(const o of c)o.objectId&&(p=Math.max(p,o.objectId));return p=Math.max(0,p)+1,()=>p++}_assignObjectId(_,c,l=!1){const p=this._queryEngine.objectIdField;_[p]=l&&p in c?c[p]:this._objectIdGenerator()}_checkProjection(_){return(0,x.Z)(function*(){try{yield(0,f._W)(R.Zn,_)}catch(c){throw new C.Z("geojson-layer","Projection not supported")}})()}}},58775:(A,P,u)=>{u.d(P,{O3:()=>i,lG:()=>d,my:()=>r,q9:()=>E});var x=u(26584),L=u(66385),C=u(88071),b=u(36630);const F={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function E(e){return F[e]}function*j(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const n of e.features)n&&(yield n)}}function*R(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const n of e.coordinates)yield*n;break;case"MultiPolygon":for(const n of e.coordinates)for(const s of n)yield*s}}function y(e){for(const n of e)if(n.length>2)return!0;return!1}function g(e){let n=0;for(let s=0;s<e.length;s++){const a=e[s],m=e[(s+1)%e.length];n+=a[0]*m[1]-m[0]*a[1]}return n<=0}function v(e){const n=e[0],s=e[e.length-1];return n[0]===s[0]&&n[1]===s[1]&&n[2]===s[2]||e.push(n),e}function M(e,n,s){switch(n.type){case"LineString":return function Z(e,n,s){return l(e,n.coordinates,s),e}(e,n,s);case"MultiLineString":return function z(e,n,s){for(const a of n.coordinates)l(e,a,s);return e}(e,n,s);case"MultiPoint":return function W(e,n,s){return l(e,n.coordinates,s),e}(e,n,s);case"MultiPolygon":return function K(e,n,s){for(const a of n.coordinates){_(e,a[0],s);for(let m=1;m<a.length;m++)c(e,a[m],s)}return e}(e,n,s);case"Point":return function S(e,n,s){return o(e,n.coordinates,s),e}(e,n,s);case"Polygon":return function G(e,n,s){const a=n.coordinates;_(e,a[0],s);for(let m=1;m<a.length;m++)c(e,a[m],s);return e}(e,n,s)}}function _(e,n,s){const a=v(n);!function f(e){return!g(e)}(a)?l(e,a,s):p(e,a,s)}function c(e,n,s){const a=v(n);!function h(e){return g(e)}(a)?l(e,a,s):p(e,a,s)}function l(e,n,s){for(const a of n)o(e,a,s);e.lengths.push(n.length)}function p(e,n,s){for(let a=n.length-1;a>=0;a--)o(e,n[a],s);e.lengths.push(n.length)}function o(e,n,s){const[a,m,B]=n;e.coords.push(a,m),s.hasZ&&e.coords.push(B||0)}function t(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function i(e){if(!e)throw new x.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new x.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:n}=e;if(!n)return;const s="string"==typeof n?n:"name"===n.type?n.properties.name:"EPSG"===n.type?n.properties.code:null,a=new RegExp(".*(CRS84H?|4326)$","i");if(!s||!a.test(s))throw new x.Z("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:n})}function r(e,n={}){const s=[],a=new Set,m=new Set;let B,D=!1,O=null,U=!1,{geometryType:w=null}=n,I=!1;for(const H of j(e)){const{geometry:k,properties:Q,id:$}=H;if((!k||(w||(w=E(k.type)),E(k.type)===w))&&(D||(D=y(R(k))),U||(U=null!=$,U&&(B=typeof $,O=Object.keys(Q).filter(N=>Q[N]===$))),U&&null!=$&&(O.length>1?O=O.filter(N=>Q[N]===$):1===O.length&&(O=Q[O[0]]===$?O:[])),!I&&Q)){let N=!0;for(const X in Q){if(a.has(X))continue;const q=Q[X];if(null==q){N=!1,m.add(X);continue}const V=t(q);"unknown"!==V?(m.delete(X),a.add(X),s.push({name:X,alias:X,type:V})):m.add(X)}I=N}}const Y=O&&1===O.length&&O[0]||null;if(Y)for(const H of s)if(H.name===Y&&(0,b.H7)(H)){H.type="esriFieldTypeOID";break}return{fields:s,geometryType:w,hasZ:D,objectIdFieldName:Y,objectIdFieldType:B,unknownFields:Array.from(m)}}function d(e,n){return Array.from(function*T(e,n={}){var m;const{geometryType:s,objectIdField:a}=n;for(const B of e){const{geometry:D,properties:O,id:U}=B;if(D&&E(D.type)!==s)continue;const w=O||{};let I=null!=(m=w[a])?m:null;a&&null!=U&&!w[a]&&(w[a]=I=U),yield new L.u_(D?M(new C.Z,D,n):null,w,null,I)}}(j(e),n))}},56554:(A,P,u)=>{u.d(P,{Dm:()=>R,Hq:()=>T,MS:()=>y,bU:()=>F});var x=u(8314),L=u(58817),C=u(87757),b=u(24837);function F(f){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===f||"esriGeometryMultipoint"===f?b.I4:"esriGeometryPolyline"===f?b.ET:b.lF}}}const E=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let j=1;function R(f,h){if((0,x.Z)("esri-csp-restrictions"))return()=>J({[h]:null},f);try{let g=`this.${h} = null;`;for(const M in f)g+=`this${E.test(M)?`.${M}`:`["${M}"]`} = ${JSON.stringify(f[M])};`;const v=new Function(`\n      return class AttributesClass$${j++} {\n        constructor() {\n          ${g};\n        }\n      }\n    `)();return()=>new v}catch(g){return()=>J({[h]:null},f)}}function T(f={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,L.d9)(f)}}]}function y(f,h){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:f},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:h,supportsDelete:h,supportsEditing:h,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:h,supportsExceedsLimitStatistics:!0},query:C.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:h,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}}}]);