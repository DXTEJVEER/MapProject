"use strict";(self.webpackChunkbeachSports=self.webpackChunkbeachSports||[]).push([[6533,164],{36912:(S,g,t)=>{t.r(g),t.d(g,{save:()=>it,saveAll:()=>yt,saveAs:()=>dt});var l=t(15861),h=t(85931),e=t(26584),u=t(63290),c=t(62208),v=t(10699),M=t(52489),D=t(32258),Z=t(24578),T=t(38305),P=t(72469),x=t(84687),m=t(55463),d=t(88755),i=t(37281);const E=u.Z.getLogger("esri.layers.FeatureLayer"),I="Feature Service";function O(n,r){return`Layer (title: ${n.title}, id: ${n.id}) of type '${n.declaredClass}' ${r}`}function Y(n,r){if(r.type!==I)throw new e.Z("feature-layer:portal-item-wrong-type",O(n,`should have portal item of type "${I}"`))}function V(n){return A.apply(this,arguments)}function A(){return(A=(0,l.Z)(function*(n){if(yield n.load(),(0,P.rQ)(n))throw new e.Z("feature-layer:save",O(n,"using an in-memory source cannot be saved to a portal item"))})).apply(this,arguments)}function _(n,r){let o=n.messages.filter(({type:a})=>"error"===a).map(({name:a,message:f,details:s})=>new e.Z(a,f,s));if((null==r?void 0:r.ignoreUnsupported)&&(o=o.filter(({name:a})=>"layer:unsupported"!==a&&"symbol:unsupported"!==a&&"symbol-layer:unsupported"!==a&&"property:unsupported"!==a&&"url:unsupported"!==a)),o.length>0)throw new e.Z("feature-layer:save","Failed to save feature layer due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:o})}function K(n,r,o){return U.apply(this,arguments)}function U(){return(U=(0,l.Z)(function*(n,r,o){"beforeSave"in n&&"function"==typeof n.beforeSave&&(yield n.beforeSave());const a=n.write({},r);return _(r,o),a})).apply(this,arguments)}function Q(n){const{layer:r,layerJSON:o}=n;return r.isTable?{layers:[],tables:[o]}:{layers:[o],tables:[]}}function R(n){(0,i.qj)(n,i.Kz.JSAPI),n.typeKeywords&&(n.typeKeywords=n.typeKeywords.filter((r,o,a)=>a.indexOf(r)===o))}function tt(n){const r=n.portalItem;if(!r)throw E.error("save: requires the portalItem property to be set"),new e.Z("feature-layer:portal-item-not-set",O(n,"requires the portalItem property to be set"));if(!r.loaded)throw new e.Z("feature-layer:portal-item-not-loaded",O(n,"cannot be saved to a portal item that does not exist or is inaccessible"));Y(n,r)}function H(n,r){return C.apply(this,arguments)}function C(){return(C=(0,l.Z)(function*(n,r){return/\/\d+\/?$/.test(n.url)?Q(r[0]):nt(n,r)})).apply(this,arguments)}function nt(n,r){return W.apply(this,arguments)}function W(){return(W=(0,l.Z)(function*(n,r){const{layer:{url:o,customParameters:a,apiKey:f}}=r[0];let s=yield n.fetchData("json");s&&null!=s.layers&&null!=s.tables||(s=yield rt(s,{url:o,customParameters:a,apiKey:f},r.map(y=>y.layer.layerId)));for(const y of r)b(y.layer,y.layerJSON,s);return s})).apply(this,arguments)}function rt(n,r,o){return j.apply(this,arguments)}function j(){return(j=(0,l.Z)(function*(n,r,o){var a,f;n||(n={}),(a=n).layers||(a.layers=[]),(f=n).tables||(f.tables=[]);const{url:s,customParameters:y,apiKey:p}=r,{serviceJSON:L,layersJSON:z}=yield(0,Z.fetchFeatureService)(s,{customParameters:y,apiKey:p}),k=X(n.layers,L.layers,o),q=X(n.tables,L.tables,o);n.layers=k.itemResources,n.tables=q.itemResources;const ct=[...k.added,...q.added],pt=z?[...z.layers,...z.tables]:[];return yield et(n,ct,s,pt),n})).apply(this,arguments)}function X(n,r,o){const a=(0,h.e5)(n,r,(s,y)=>s.id===y.id);n=n.filter(s=>!a.removed.some(y=>y.id===s.id));const f=a.added.map(({id:s})=>({id:s}));return f.forEach(({id:s})=>{n.push({id:s})}),{itemResources:n,added:f.filter(({id:s})=>!o.includes(s))}}function et(n,r,o,a){return B.apply(this,arguments)}function B(){return(B=(0,l.Z)(function*(n,r,o,a){const f=r.map(({id:s})=>new D.default({url:o,layerId:s,sourceJSON:a.find(({id:y})=>y===s)}));yield(0,v.as)(f.map(s=>s.load())),f.forEach(s=>{const{layerId:y,loaded:p,defaultPopupTemplate:L}=s;!p||(0,c.Wi)(L)||b(s,{id:y,popupInfo:L.toJSON()},n)})})).apply(this,arguments)}function b(n,r,o){!function w(n,r){const o=n.findIndex(({id:a})=>a===r.id);-1===o?n.push(r):n[o]=r}(n.isTable?o.tables:o.layers,r)}function at(n){const{portalItem:r}=n;return(0,P.y2)(n)&&!n.dynamicDataSource&&!!(null==r?void 0:r.loaded)&&r.type===I}function G(){return(G=(0,l.Z)(function*(n){if(!(null==n?void 0:n.length))throw new e.Z("feature-layer-utils-saveall:missing-parameters","'layers' array should contain at least one feature layer");yield Promise.all(n.map(a=>a.load()));for(const a of n)if(!at(a))throw new e.Z("feature-layer-utils-saveall:invalid-parameters",`'layers' array should only contain layers or tables in a feature service loaded from 'Feature Service' item. ${O(a,"does not conform")}`,{layer:a});const r=n.map(a=>a.portalItem.id);if(new Set(r).size>1)throw new e.Z("feature-layer-utils-saveall:invalid-parameters","All layers in the 'layers' array should be loaded from the same portal item");const o=n.map(a=>a.layerId);if(new Set(o).size!==o.length)throw new e.Z("feature-layer-utils-saveall:invalid-parameters","'layers' array should contain only one instance each of layer or table in a feature service")})).apply(this,arguments)}function lt(n,r){var o,a;let f=m.default.from(r);return f.id&&(f=f.clone(),f.id=null),null!=(o=f).type||(o.type=I),null!=(a=f).portal||(a.portal=x.Z.getDefault()),Y(n,f),f}function st(n,r){return N.apply(this,arguments)}function N(){return(N=(0,l.Z)(function*(n,r){const{url:o,layerId:a,title:f,fullExtent:s,isTable:y}=n,p=(0,T.Qc)(o),L=(0,c.pC)(p)&&"FeatureServer"===p.serverType;r.url=L?o:`${o}/${a}`,r.title||(r.title=f),r.extent=null,!y&&(0,c.pC)(s)&&(r.extent=yield(0,i.$o)(s)),(0,i.ck)(r,i.Kz.METADATA),(0,i.ck)(r,i.Kz.MULTI_LAYER),(0,i.qj)(r,i.Kz.SINGLE_LAYER),y&&(0,i.qj)(r,i.Kz.TABLE),R(r)})).apply(this,arguments)}function ut(n,r,o){return J.apply(this,arguments)}function J(){return(J=(0,l.Z)(function*(n,r,o){const a=n.portal;yield a._signIn(),yield a.user.addItem({item:n,data:r,folder:null==o?void 0:o.folder})})).apply(this,arguments)}const it=(0,v.Ds)(function ft(n,r){return F.apply(this,arguments)});function F(){return(F=(0,l.Z)(function*(n,r){yield V(n),tt(n);const o=n.portalItem,a=(0,d.Y)(o),f=yield K(n,a,r),s=yield H(o,[{layer:n,layerJSON:f}]);return R(o),yield o.update({data:s}),(0,M.D)(a),o})).apply(this,arguments)}const yt=(0,v.Ds)(function(){var n=(0,l.Z)(function*(r,o){yield function ot(n){return G.apply(this,arguments)}(r);const a=r[0].portalItem,f=(0,d.Y)(a),s=yield Promise.all(r.map(p=>K(p,f,o))),y=yield H(a,r.map((p,L)=>({layer:p,layerJSON:s[L]})));return R(a),yield a.update({data:y}),yield Promise.all(r.slice(1).map(p=>p.portalItem.reload())),(0,M.D)(f),a.clone()});return function(r,o){return n.apply(this,arguments)}}()),dt=(0,v.Ds)(function mt(n,r,o){return $.apply(this,arguments)});function $(){return($=(0,l.Z)(function*(n,r,o){yield V(n);const a=lt(n,r),f=(0,d.Y)(a),s=Q({layer:n,layerJSON:yield K(n,f,o)});return yield st(n,a),yield ut(a,s,o),n.portalItem=a,(0,M.D)(f),a})).apply(this,arguments)}},30164:(S,g,t)=>{t.d(g,{T:()=>h});var l=t(15861);const h={BingMapsLayer:(e=(0,l.Z)(function*(){return(yield t.e(2248).then(t.bind(t,72248))).default}),function(){return e.apply(this,arguments)}),BuildingSceneLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(6189)]).then(t.bind(t,6189))).default});return function(){return e.apply(this,arguments)}}(),CSVLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(5625).then(t.bind(t,85625))).default});return function(){return e.apply(this,arguments)}}(),ElevationLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(5810)]).then(t.bind(t,75810))).default});return function(){return e.apply(this,arguments)}}(),FeatureLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.resolve().then(t.bind(t,32258))).default});return function(){return e.apply(this,arguments)}}(),GroupLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(5964).then(t.bind(t,25964))).default});return function(){return e.apply(this,arguments)}}(),GeoRSSLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(6306).then(t.bind(t,96306))).default});return function(){return e.apply(this,arguments)}}(),GeoJSONLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(2903).then(t.bind(t,72903))).default});return function(){return e.apply(this,arguments)}}(),ImageryLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(7692),t.e(4307),t.e(3016),t.e(9602)]).then(t.bind(t,49602))).default});return function(){return e.apply(this,arguments)}}(),ImageryTileLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(7692),t.e(4307),t.e(8594),t.e(3016),t.e(8592),t.e(6003)]).then(t.bind(t,36003))).default});return function(){return e.apply(this,arguments)}}(),IntegratedMeshLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(7867).then(t.bind(t,67867))).default});return function(){return e.apply(this,arguments)}}(),KMLLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(2701).then(t.bind(t,12701))).default});return function(){return e.apply(this,arguments)}}(),LineOfSightLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(756)]).then(t.bind(t,80756))).default});return function(){return e.apply(this,arguments)}}(),MapImageLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(3130),t.e(8592),t.e(7948)]).then(t.bind(t,48887))).default});return function(){return e.apply(this,arguments)}}(),MapNotesLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(9859)]).then(t.bind(t,19859))).default});return function(){return e.apply(this,arguments)}}(),OGCFeatureLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(9628),t.e(2955)]).then(t.bind(t,36554))).default});return function(){return e.apply(this,arguments)}}(),OpenStreetMapLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(1591)]).then(t.bind(t,71591))).default});return function(){return e.apply(this,arguments)}}(),PointCloudLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(7155).then(t.bind(t,7155))).default});return function(){return e.apply(this,arguments)}}(),RouteLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(403),t.e(1945)]).then(t.bind(t,71945))).default});return function(){return e.apply(this,arguments)}}(),SceneLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.resolve().then(t.bind(t,27559))).default});return function(){return e.apply(this,arguments)}}(),StreamLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(289).then(t.bind(t,70289))).default});return function(){return e.apply(this,arguments)}}(),TileLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(3130),t.e(8592),t.e(9735)]).then(t.bind(t,59735))).default});return function(){return e.apply(this,arguments)}}(),UnknownLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(6339).then(t.bind(t,56339))).default});return function(){return e.apply(this,arguments)}}(),UnsupportedLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(6240).then(t.bind(t,16240))).default});return function(){return e.apply(this,arguments)}}(),VectorTileLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(8364),t.e(8592),t.e(1770)]).then(t.bind(t,14836))).default});return function(){return e.apply(this,arguments)}}(),VoxelLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(8115).then(t.bind(t,68115))).default});return function(){return e.apply(this,arguments)}}(),WebTileLayer:function(){var e=(0,l.Z)(function*(){return(yield t.e(8592).then(t.bind(t,28678))).default});return function(){return e.apply(this,arguments)}}(),WFSLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(3774),t.e(8762)]).then(t.bind(t,98762))).default});return function(){return e.apply(this,arguments)}}(),WMSLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(6894)]).then(t.bind(t,46894))).default});return function(){return e.apply(this,arguments)}}(),WMTSLayer:function(){var e=(0,l.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(4223)]).then(t.bind(t,64223))).default});return function(){return e.apply(this,arguments)}}()};var e},88755:(S,g,t)=>{t.d(g,{Y:()=>u,h:()=>e});var l=t(21726),h=t(84687);function e(c){return{origin:"portal-item",url:(0,l.mN)(c.itemUrl),portal:c.portal||h.Z.getDefault(),portalItem:c,readResourcePaths:[]}}function u(c){return{origin:"portal-item",messages:[],writtenProperties:[],url:c.itemUrl?(0,l.mN)(c.itemUrl):null,portal:c.portal||h.Z.getDefault(),portalItem:c}}},37281:(S,g,t)=>{t.d(g,{$o:()=>T,Kz:()=>x,_$:()=>D,ck:()=>Z,qj:()=>M});var l=t(15861),h=t(55915),e=t(65234),u=t(46367);function c(m){return v.apply(this,arguments)}function v(){return(v=(0,l.Z)(function*(m){const d=m.spatialReference;if(d.isWGS84)return m.clone();if(d.isWebMercator)return(0,u.Sx)(m);const i=e.Z.WGS84;return yield(0,h.iQ)(d,i),(0,h.iV)(m,i)})).apply(this,arguments)}function M(m,d){if(!D(m,d)){const i=m.typeKeywords;i?i.push(d):m.typeKeywords=[d]}}function D(m,d){var i;return!!(null==(i=m.typeKeywords)?void 0:i.includes(d))}function Z(m,d){const i=m.typeKeywords;if(i){const E=i.indexOf(d);E>-1&&i.splice(E,1)}}function T(m){return P.apply(this,arguments)}function P(){return(P=(0,l.Z)(function*(m){const d=m.clone().normalize();let i;if(d.length>1)for(const E of d)i?E.width>i.width&&(i=E):i=E;else i=d[0];return c(i)})).apply(this,arguments)}const x={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table"}}}]);