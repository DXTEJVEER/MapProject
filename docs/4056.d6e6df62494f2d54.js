"use strict";(self.webpackChunkbeachSports=self.webpackChunkbeachSports||[]).push([[4056],{44056:(y,E,n)=>{n.r(E),n.d(E,{default:()=>C});var b=n(62208),m=n(55713),I=n(48977),v=n(56729),O=n(84161),c=n(14658),P=n(55915),M=n(65234),i=n(14471);class A{transform(t){const a=this._transform(t),e=[a.points.buffer,a.rgb.buffer];(0,b.pC)(a.pointIdFilterMap)&&e.push(a.pointIdFilterMap.buffer);for(const o of a.attributes)"buffer"in o.values&&(0,m.eP)(o.values.buffer)&&o.values.buffer!==a.rgb.buffer&&e.push(o.values.buffer);return Promise.resolve({result:a,transferList:e})}_transform(t){const a=(0,i.Ym)(t.schema,t.geometryBuffer);let e=a.length/3,o=null;const u=[],l=(0,i.dH)(t.primaryAttributeData,a,e);(0,b.pC)(t.primaryAttributeData)&&l&&u.push({attributeInfo:t.primaryAttributeData.attributeInfo,values:l});const s=(0,i.dH)(t.modulationAttributeData,a,e);(0,b.pC)(t.modulationAttributeData)&&s&&u.push({attributeInfo:t.modulationAttributeData.attributeInfo,values:s});let f=(0,i.aE)(t.rendererInfo,l,s,e);if(t.filterInfo&&t.filterInfo.length>0&&(0,b.pC)(t.filterAttributesData)){const r=t.filterAttributesData.map(h=>{const d=(0,i.dH)(h,a,e),D={attributeInfo:h.attributeInfo,values:d};return u.push(D),D});o=new Uint32Array(e),e=(0,i.hv)(a,f,o,t.filterInfo,r)}for(const r of t.userAttributesData){const h=(0,i.dH)(r,a,e);u.push({attributeInfo:r.attributeInfo,values:h})}3*e<f.length&&(f=new Uint8Array(f.buffer.slice(0,3*e))),this._applyElevationOffsetInPlace(a,e,t.elevationOffset);const _=this._transformCoordinates(a,e,t.obb,M.Z.fromJSON(t.inSR),M.Z.fromJSON(t.outSR));return{obb:t.obb,points:_,rgb:f,attributes:u,pointIdFilterMap:o}}_transformCoordinates(t,a,e,o,u){if(!(0,P.CM)(t,o,0,t,u,0,a))throw Error("Can't reproject");const l=(0,c.f)(e.center[0],e.center[1],e.center[2]),s=(0,c.c)(),f=(0,c.c)();(0,I.c)(p,e.quaternion);const _=new Float32Array(3*a);for(let r=0;r<a;r++)s[0]=t[3*r]-l[0],s[1]=t[3*r+1]-l[1],s[2]=t[3*r+2]-l[2],(0,O.q)(f,s,p),e.halfSize[0]=Math.max(e.halfSize[0],Math.abs(f[0])),e.halfSize[1]=Math.max(e.halfSize[1],Math.abs(f[1])),e.halfSize[2]=Math.max(e.halfSize[2],Math.abs(f[2])),_[3*r]=s[0],_[3*r+1]=s[1],_[3*r+2]=s[2];return _}_applyElevationOffsetInPlace(t,a,e){if(0!==e)for(let o=0;o<a;o++)t[3*o+2]+=e}}const p=(0,v.c)();function C(){return new A}}}]);