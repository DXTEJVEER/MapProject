"use strict";var w=Object.defineProperty,x=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,f=(i,o,t)=>o in i?w(i,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[o]=t,y=(i,o)=>{for(var t in o||(o={}))k.call(o,t)&&f(i,t,o[t]);if(T)for(var t of T(o))H.call(o,t)&&f(i,t,o[t]);return i},U=(i,o)=>x(i,Z(o));(self.webpackChunkbeachSports=self.webpackChunkbeachSports||[]).push([[7434],{67434:(i,o,t)=>{t.r(o),t.d(o,{default:()=>L});var p=t(15861),K=t(17626),E=(t(8314),t(62208)),m=(t(63290),t(90912),t(85931),t(82255),t(76898)),v=t(84682),C=t(36859),I=t(39351),R=t(13112),d=t(55376);class l{constructor(s,a){this.offset=s,this.extent=a}}let c=class extends R.Z{constructor(){super(...arguments),this.type="heatmap",this._tileKeyToFeatureSets=new Map}initialize(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])}update(r,s){var a=this;return(0,p.Z)(function*(){const _=s.schema.processors[0];"heatmap"===_.type&&(0,v.Hg)(a._schema,_)&&(r.mesh=!0,a._schema=_)})()}onTileUpdate(r){for(const s of r.removed)this._tileKeyToFeatureSets.delete(s.key.id)}onTileClear(r){return this._tileKeyToFeatureSets.delete(r.key.id),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:r.id,data:{clear:!0}})}onTileMessage(r,s,a){var _=this;return(0,p.Z)(function*(){_._tileKeyToFeatureSets.has(r.key.id)||_._tileKeyToFeatureSets.set(r.key.id,new Map);const e=_._tileKeyToFeatureSets.get(r.key.id);if((0,E.pC)(s.addOrUpdate)&&s.addOrUpdate.hasFeatures&&e.set(s.addOrUpdate.instance,s),s.end){const n=[],u=function j(r){const s=r.key,a=new Map,_=256,e=I.I_,n=r.tileInfoView.tileInfo.isWrappable;return a.set((0,d.M)(s,-1,-1,n).id,new l([-e,-e],[e-_,e-_,e,e])),a.set((0,d.M)(s,0,-1,n).id,new l([0,-e],[0,e-_,e,e])),a.set((0,d.M)(s,1,-1,n).id,new l([e,-e],[0,e-_,_,e])),a.set((0,d.M)(s,-1,0,n).id,new l([-e,0],[e-_,0,e,e])),a.set((0,d.M)(s,1,0,n).id,new l([e,0],[0,0,_,e])),a.set((0,d.M)(s,-1,1,n).id,new l([-e,e],[e-_,0,e,_])),a.set((0,d.M)(s,0,1,n).id,new l([0,e],[0,0,e,_])),a.set((0,d.M)(s,1,1,n).id,new l([e,e],[0,0,_,_])),a}(r);_._tileKeyToFeatureSets.forEach((P,h)=>{if(h===r.key.id)P.forEach(M=>(0,E.yw)(M.addOrUpdate,O=>n.push(O)));else if(u.has(h)){const M=u.get(h),[O,A]=M.offset;P.forEach(S=>(0,E.yw)(S.addOrUpdate,g=>{const F=g.transform(O,A,1,1);n.push(F)}))}});const D=(0,C.QM)(n,_._schema.mesh,512,512),W=[D.matrix];return _.remoteClient.invoke("tileRenderer.onTileData",{tileKey:r.key.id,intensityInfo:D},U(y({},a),{transferList:W}))}})()}onTileError(r,s,a){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:r.id,error:s},a)}};c=(0,K._)([(0,m.j)("esri.views.2d.layers.features.processors.HeatmapProcessor")],c);const L=c}}]);