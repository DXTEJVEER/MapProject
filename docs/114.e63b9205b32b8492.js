"use strict";var he=Object.defineProperty,fe=Object.defineProperties,me=Object.getOwnPropertyDescriptors,vt=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable,It=(S,F,i)=>F in S?he(S,F,{enumerable:!0,configurable:!0,writable:!0,value:i}):S[F]=i,u=(S,F)=>{for(var i in F||(F={}))ge.call(F,i)&&It(S,i,F[i]);if(vt)for(var i of vt(F))Fe.call(F,i)&&It(S,i,F[i]);return S},g=(S,F)=>fe(S,me(F));(self.webpackChunkbeachSports=self.webpackChunkbeachSports||[]).push([[114],{87757:(S,F,i)=>{i.d(F,{g:()=>p});const p={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},30114:(S,F,i)=>{i.r(F),i.d(F,{default:()=>ye});var p=i(15861),R=i(17626),C=(i(29132),i(88879)),O=i(84792),I=i(97478),v=i(26584),_=i(8314),T=i(2076),q=i(47996),m=i(62208),b=i(94113),Q=i(10699),A=i(21726),x=i(77712),V=(i(85931),i(90912),i(76898)),W=i(2004),ht=i(91179),_t=i(56554),ft=i(15283),bt=i(2865),D=i(2618),Et=i(94573),Ct=i(33696),mt=i(82054);function Tt(r,t){return t}function $(r,t,e,s){switch(e){case 0:return J(r,t+s,0);case 1:return"lowerLeft"===r.originPosition?J(r,t+s,1):function Zt({translate:r,scale:t},e,s){return r[s]-e*t[s]}(r,t+s,1)}}function gt(r,t,e,s){return 2===e?J(r,t,2):$(r,t,e,s)}function Dt(r,t,e,s){return 2===e?J(r,t,3):$(r,t,e,s)}function jt(r,t,e,s){return 3===e?J(r,t,3):gt(r,t,e,s)}function J({translate:r,scale:t},e,s){return r[s]+e*t[s]}class Pt{constructor(t){this.options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=Tt,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this._attributesConstructor=()=>{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(t){if(this.options.applyTransform&&(t.transform=null),this._attributesConstructor=()=>{},this.coordinateBuffer=null,this.lengths.length=0,!t.hasZ)return;const e=(0,Ct.k)(t.geometryType,this.options.sourceSpatialReference,t.spatialReference);if(!(0,m.Wi)(e))for(const s of t.features)e(s.geometry)}createSpatialReference(){return{}}addField(t,e){t.fields.push(e);const s=t.fields.map(n=>n.name);this._attributesConstructor=function(){for(const n of s)this[n]=null}}addFeature(t,e){t.features.push(e)}prepareFeatures(t){switch(this.transform=t.transform,this.options.applyTransform&&t.transform&&(this.applyTransform=this._deriveApplyTransform(t)),this.vertexDimension=2,t.hasZ&&this.vertexDimension++,t.hasM&&this.vertexDimension++,t.geometryType){case"esriGeometryPoint":this.addCoordinate=(e,s,n)=>this.addCoordinatePoint(e,s,n),this.createGeometry=e=>this.createPointGeometry(e);break;case"esriGeometryPolygon":this.addCoordinate=(e,s,n)=>this._addCoordinatePolygon(e,s,n),this.createGeometry=e=>this._createPolygonGeometry(e);break;case"esriGeometryPolyline":this.addCoordinate=(e,s,n)=>this._addCoordinatePolyline(e,s,n),this.createGeometry=e=>this._createPolylineGeometry(e);break;case"esriGeometryMultipoint":this.addCoordinate=(e,s,n)=>this._addCoordinateMultipoint(e,s,n),this.createGeometry=e=>this._createMultipointGeometry(e);break;default:(0,Et.Bg)(t.geometryType)}}createFeature(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(t,e,s){0===this.lengths.length&&(this.toAddInCurrentPath=e),this.lengths.push(e)}addQueryGeometry(t,e){const{queryGeometry:s,queryGeometryType:n}=e,l=(0,mt.$g)(s.clone(),s,!1,!1,this.transform),d=(0,mt.di)(l,n,!1,!1);t.queryGeometryType=n,t.queryGeometry=u({},d)}createPointGeometry(t){const e={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(e.z=0),t.hasM&&(e.m=0),e}addCoordinatePoint(t,e,s){switch(e=this.applyTransform(this.transform,e,s,0),s){case 0:t.x=e;break;case 1:t.y=e;break;case 2:"z"in t?t.z=e:t.m=e;break;case 3:t.m=e}}_transformPathLikeValue(t,e){let s=0;return e<=1&&(s=this.previousCoordinate[e],this.previousCoordinate[e]+=t),this.applyTransform(this.transform,t,e,s)}_addCoordinatePolyline(t,e,s){this._dehydratedAddPointsCoordinate(t.paths,e,s)}_addCoordinatePolygon(t,e,s){this._dehydratedAddPointsCoordinate(t.rings,e,s)}_addCoordinateMultipoint(t,e,s){0===s&&t.points.push([]);const n=this._transformPathLikeValue(e,s);t.points[t.points.length-1].push(n)}_createPolygonGeometry(t){return{rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,e,s){0===s&&0==this.toAddInCurrentPath--&&(t.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);const n=this._transformPathLikeValue(e,s),l=t[t.length-1];0===s&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),l.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=n}_deriveApplyTransform(t){const{hasZ:e,hasM:s}=t;return e&&s?jt:e?gt:s?Dt:$}}var Ft=i(20477),K=i(17253),H=i(84952);function Y(){return(Y=(0,p.Z)(function*(r,t,e){const s=(0,D.en)(r),n=u({},e),l=H.Z.from(t),d=!l.quantizationParameters,{data:c}=yield(0,Ft.executeQueryPBF)(s,l,new Pt({sourceSpatialReference:l.sourceSpatialReference,applyTransform:d}),n);return c})).apply(this,arguments)}var At=i(24263),k=i(76391),qt=i(87183);function Mt(r){const t=r.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.keywords&&(t.keywords=t.keywords.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}function xt(r,t){const e={};for(const s of r){const{parentObjectId:n,parentGlobalId:l,attachmentInfos:d}=s;for(const c of d){const{id:y}=c,h=(0,A.qg)((0,At.Dp)(`${t}/${n}/attachments/${y}`)),f=qt.Z.fromJSON(c);f.set({url:h,parentObjectId:n,parentGlobalId:l}),e[n]?e[n].push(f):e[n]=[f]}}return e}function Qt(r,t,e){let s={query:(0,k.A)(u(g(u({},r.query),{f:"json"}),Mt(t)))};return e&&(s=g(u(u({},e),s),{query:u(u({},e.query),s.query)})),(0,O.default)(r.path+"/queryAttachments",s)}var Gt=i(67736);function w(){return(w=(0,p.Z)(function*(r,t,e){const s=(0,D.en)(r);return Qt(s,Gt.Z.from(t),u({},e)).then(n=>xt(n.data.attachmentGroups,s.path))})).apply(this,arguments)}var Jt=i(90463);function tt(){return(tt=(0,p.Z)(function*(r,t,e){const s=(0,D.en)(r);return(0,Ft.executeQueryForExtent)(s,H.Z.from(t),u({},e)).then(n=>({count:n.data.count,extent:W.Z.fromJSON(n.data.extent)}))})).apply(this,arguments)}var Bt=i(24865);function Lt(r,t){const e=r.toJSON();return e.objectIds&&(e.objectIds=e.objectIds.join(",")),e.orderByFields&&(e.orderByFields=e.orderByFields.join(",")),e.outFields&&!(null==t?void 0:t.returnCountOnly)?e.outFields=e.outFields.includes("*")?"*":e.outFields.join(","):delete e.outFields,e.outSpatialReference&&(e.outSR=e.outSR.wkid||JSON.stringify(e.outSR.toJSON()),delete e.outSpatialReference),e.dynamicDataSource&&(e.layer=JSON.stringify({source:e.dynamicDataSource}),delete e.dynamicDataSource),e}function zt(r,t,e){return et.apply(this,arguments)}function et(){return(et=(0,p.Z)(function*(r,t,e){const s=yield Ot(r,t,e),n=s.data,l=n.geometryType,d=n.spatialReference,c={};for(const y of n.relatedRecordGroups){const h={fields:void 0,objectIdFieldName:void 0,geometryType:l,spatialReference:d,hasZ:!!n.hasZ,hasM:!!n.hasM,features:y.relatedRecords};if(null!=y.objectId)c[y.objectId]=h;else for(const f in y)y.hasOwnProperty(f)&&"relatedRecords"!==f&&(c[y[f]]=h)}return g(u({},s),{data:c})})).apply(this,arguments)}function Vt(r,t,e){return rt.apply(this,arguments)}function rt(){return(rt=(0,p.Z)(function*(r,t,e){const s=yield Ot(r,t,e,{returnCountOnly:!0}),n=s.data,l={};for(const d of n.relatedRecordGroups)null!=d.objectId&&(l[d.objectId]=d.count);return g(u({},s),{data:l})})).apply(this,arguments)}function Ot(r,t){return st.apply(this,arguments)}function st(){return(st=(0,p.Z)(function*(r,t,e={},s){const n=(0,k.A)(u(u(g(u({},r.query),{f:"json"}),s),Lt(t,s)));return(0,O.default)(r.path+"/queryRelatedRecords",g(u({},e),{query:u(u({},e.query),n)}))})).apply(this,arguments)}var B=i(67010);function nt(){return(nt=(0,p.Z)(function*(r,t,e){return t=B.Z.from(t),zt((0,D.en)(r),t,e).then(n=>{const l=n.data,d={};return Object.keys(l).forEach(c=>d[c]=K.default.fromJSON(l[c])),d})})).apply(this,arguments)}function ot(){return(ot=(0,p.Z)(function*(r,t,e){return t=B.Z.from(t),Vt((0,D.en)(r),t,u({},e)).then(n=>n.data)})).apply(this,arguments)}var Kt=i(13924),Ht=i(61515);const St="Layer does not support extent calculation.";function Yt(r,t,e,s){return at.apply(this,arguments)}function at(){return(at=(0,p.Z)(function*(r,t,e,s){const n=yield L(r,t,"json",s);return(0,Ht.p)(t,e,n.data),n})).apply(this,arguments)}function kt(r,t,e){return it.apply(this,arguments)}function it(){return(it=(0,p.Z)(function*(r,t,e){return(0,m.pC)(t.timeExtent)&&t.timeExtent.isEmpty?{data:{objectIds:[]}}:L(r,t,"json",e,{returnIdsOnly:!0})})).apply(this,arguments)}function wt(r,t,e){return ut.apply(this,arguments)}function ut(){return(ut=(0,p.Z)(function*(r,t,e){return(0,m.pC)(t.timeExtent)&&t.timeExtent.isEmpty?{data:{count:0,extent:null}}:L(r,t,"json",e,{returnExtentOnly:!0,returnCountOnly:!0}).then(s=>{const n=s.data;if(n.hasOwnProperty("extent"))return s;if(n.features)throw new Error(St);if(n.hasOwnProperty("count"))throw new Error(St);return s})})).apply(this,arguments)}function te(r,t,e){return(0,m.pC)(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):L(r,t,"json",e,{returnIdsOnly:!0,returnCountOnly:!0})}function L(r,t,e,s={},n={}){const l="string"==typeof r?(0,A.mN)(r):r,d=t.geometry?[t.geometry]:[];return s.responseType="pbf"===e?"array-buffer":"json",(0,Kt.aX)(d,null,s).then(c=>{const y=c&&c[0];(0,m.pC)(y)&&((t=t.clone()).geometry=y);const h=(0,k.A)(u(u(g(u({},l.query),{f:e}),n),function Xt(r,t){var l,d;const e=r.geometry,s=r.toJSON(),n=s;if((0,m.pC)(e)&&(n.geometry=JSON.stringify(e),n.geometryType=(0,ht.Ji)(e),n.inSR=e.spatialReference.wkid||JSON.stringify(e.spatialReference)),(null==(l=s.topFilter)?void 0:l.groupByFields)&&(n.topFilter.groupByFields=s.topFilter.groupByFields.join(",")),(null==(d=s.topFilter)?void 0:d.orderByFields)&&(n.topFilter.orderByFields=s.topFilter.orderByFields.join(",")),s.topFilter&&(n.topFilter=JSON.stringify(n.topFilter)),s.objectIds&&(n.objectIds=s.objectIds.join(",")),s.orderByFields&&(n.orderByFields=s.orderByFields.join(",")),s.outFields&&!((null==t?void 0:t.returnCountOnly)||(null==t?void 0:t.returnExtentOnly)||(null==t?void 0:t.returnIdsOnly))?n.outFields=s.outFields.includes("*")?"*":s.outFields.join(","):delete n.outFields,s.outSR?n.outSR=s.outSR.wkid||JSON.stringify(s.outSR):e&&s.returnGeometry&&(n.outSR=n.inSR),s.returnGeometry&&delete s.returnGeometry,s.timeExtent){const c=s.timeExtent,{start:y,end:h}=c;null==y&&null==h||(n.time=y===h?y:`${null==y?"null":y},${null==h?"null":h}`),delete s.timeExtent}return n}(t,n)));return(0,O.default)((0,A.v_)(l.path,"queryTopFeatures"),g(u({},s),{query:u(u({},h),s.query)}))})}var z=i(6871);function lt(){return(lt=(0,p.Z)(function*(r,t,e,s){const n=(0,D.en)(r),l=u({},s),{data:d}=yield Yt(n,z.Z.from(t),e,l);return K.default.fromJSON(d)})).apply(this,arguments)}function dt(){return(dt=(0,p.Z)(function*(r,t,e){const s=(0,D.en)(r);return(yield kt(s,z.Z.from(t),u({},e))).data.objectIds})).apply(this,arguments)}function ct(){return(ct=(0,p.Z)(function*(r,t,e){const s=(0,D.en)(r),n=yield wt(s,z.Z.from(t),u({},e));return{count:n.data.count,extent:W.Z.fromJSON(n.data.extent)}})).apply(this,arguments)}function pt(){return(pt=(0,p.Z)(function*(r,t,e){const s=(0,D.en)(r);return(yield te(s,z.Z.from(t),u({},e))).data.count})).apply(this,arguments)}var oe=i(14517);let G=class extends oe.Z{constructor(...r){super(...r),this.requestOptions=null,this.url=null}normalizeCtorArgs(r,t){return"string"!=typeof r?r:u({url:r},t)}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(r){return r?(0,A.mN)(r):null}_encode(r,t,e){const s={};for(const n in r){if("declaredClass"===n)continue;const l=r[n];if(null!=l&&"function"!=typeof l)if(Array.isArray(l)){s[n]=[];for(let d=0;d<l.length;d++)s[n][d]=this._encode(l[d])}else if("object"==typeof l)if(l.toJSON){const d=l.toJSON(e&&e[n]);s[n]=t?d:JSON.stringify(d)}else s[n]=t?l:JSON.stringify(l);else s[n]=l}return s}};(0,R._)([(0,x.Cb)({readOnly:!0})],G.prototype,"parsedUrl",null),(0,R._)([(0,x.Cb)()],G.prototype,"requestOptions",void 0),(0,R._)([(0,x.Cb)({type:String})],G.prototype,"url",void 0),G=(0,R._)([(0,V.j)("esri.tasks.Task")],G);const ae=G;let j=class extends ae{constructor(r){super(r),this.dynamicDataSource=null,this.fieldsIndex=null,this.format="json",this.gdbVersion=null,this.infoFor3D=null,this.sourceSpatialReference=null}execute(r,t){return this.executeJSON(r,t).then(e=>this.featureSetFromJSON(r,e,t))}executeJSON(r,t){var e=this;return(0,p.Z)(function*(){var h;const s=u(u({},e.requestOptions),t),n=e._normalizeQuery(r),l=null!=(null==(h=r.outStatistics)?void 0:h[0]),d=(0,_.Z)("featurelayer-pbf-statistics"),c=!l||d;let y;if("pbf"===e.format&&c)try{y=yield function Rt(r,t,e){return Y.apply(this,arguments)}(e.url,n,s)}catch(f){if("query:parsing-pbf"!==f.name)throw f;e.format="json"}return"json"!==e.format&&c||(y=yield(0,bt.F)(e.url,n,s)),e._normalizeFields(y.fields),y})()}featureSetFromJSON(r,t,e){var s=this;return(0,p.Z)(function*(){if(!s._queryIs3DObjectFormat(r)||(0,m.Wi)(s.infoFor3D)||!t.features||!t.features.length)return K.default.fromJSON(t);const{meshFeatureSetFromJSON:n}=yield(0,Q.Hl)(Promise.all([i.e(8592),i.e(2579)]).then(i.bind(i,42579)),e);return n(r,s.infoFor3D,t)})()}executeForCount(r,t){const e=u(u({},this.requestOptions),t),s=this._normalizeQuery(r);return(0,Jt.P)(this.url,s,e)}executeForExtent(r,t){const e=u(u({},this.requestOptions),t),s=this._normalizeQuery(r);return function Ut(r,t,e){return tt.apply(this,arguments)}(this.url,s,e)}executeForIds(r,t){const e=u(u({},this.requestOptions),t),s=this._normalizeQuery(r);return(0,Bt.G)(this.url,s,e)}executeRelationshipQuery(r,t){r=B.Z.from(r);const e=u(u({},this.requestOptions),t);return(this.gdbVersion||this.dynamicDataSource)&&((r=r.clone()).gdbVersion=r.gdbVersion||this.gdbVersion,r.dynamicDataSource=r.dynamicDataSource||this.dynamicDataSource),function Wt(r,t,e){return nt.apply(this,arguments)}(this.url,r,e)}executeRelationshipQueryForCount(r,t){r=B.Z.from(r);const e=u(u({},this.requestOptions),t);return(this.gdbVersion||this.dynamicDataSource)&&((r=r.clone()).gdbVersion=r.gdbVersion||this.gdbVersion,r.dynamicDataSource=r.dynamicDataSource||this.dynamicDataSource),function $t(r,t,e){return ot.apply(this,arguments)}(this.url,r,e)}executeAttachmentQuery(r,t){const e=u(u({},this.requestOptions),t);return function Nt(r,t,e){return w.apply(this,arguments)}(this.url,r,e)}executeTopFeaturesQuery(r,t){const e=u(u({},this.requestOptions),t);return function ee(r,t,e,s){return lt.apply(this,arguments)}(this.parsedUrl,r,this.sourceSpatialReference,e)}executeForTopIds(r,t){const e=u(u({},this.requestOptions),t);return function re(r,t,e){return dt.apply(this,arguments)}(this.parsedUrl,r,e)}executeForTopExtents(r,t){const e=u(u({},this.requestOptions),t);return function se(r,t,e){return ct.apply(this,arguments)}(this.parsedUrl,r,e)}executeForTopCount(r,t){const e=u(u({},this.requestOptions),t);return function ne(r,t,e){return pt.apply(this,arguments)}(this.parsedUrl,r,e)}_normalizeQuery(r){let t=H.Z.from(r);if(t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===r?t.clone():t,t.gdbVersion=r.gdbVersion||this.gdbVersion,t.dynamicDataSource=r.dynamicDataSource?ft.n.from(r.dynamicDataSource):this.dynamicDataSource),(0,m.pC)(this.infoFor3D)&&this._queryIs3DObjectFormat(r)){t=t===r?t.clone():t,t.formatOf3DObjects=null;for(const e of this.infoFor3D.queryFormats){if("3D_glb"===e.id){t.formatOf3DObjects=e.id;break}"3D_gltf"!==e.id||t.formatOf3DObjects||(t.formatOf3DObjects=e.id)}if(!t.formatOf3DObjects)throw new v.Z("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if((0,m.Wi)(t.outFields)||!t.outFields.includes("*")){t=t===r?t.clone():t,(0,m.Wi)(t.outFields)&&(t.outFields=[]);const{originX:e,originY:s,originZ:n,translationX:l,translationY:d,translationZ:c,scaleX:y,scaleY:h,scaleZ:f,rotationX:Z,rotationY:P,rotationZ:E,rotationDeg:U}=this.infoFor3D.transformFieldRoles;t.outFields.push(e,s,n,l,d,c,y,h,f,Z,P,E,U)}}return t}_normalizeFields(r){if((0,m.pC)(this.fieldsIndex)&&(0,m.pC)(r))for(const t of r){const e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON())}}_queryIs3DObjectFormat(r){return(0,m.pC)(this.infoFor3D)&&r.returnGeometry&&"xyFootprint"!==r.multipatchOption&&!r.outStatistics}};(0,R._)([(0,x.Cb)({type:ft.n})],j.prototype,"dynamicDataSource",void 0),(0,R._)([(0,x.Cb)()],j.prototype,"fieldsIndex",void 0),(0,R._)([(0,x.Cb)()],j.prototype,"format",void 0),(0,R._)([(0,x.Cb)()],j.prototype,"gdbVersion",void 0),(0,R._)([(0,x.Cb)()],j.prototype,"infoFor3D",void 0),(0,R._)([(0,x.Cb)()],j.prototype,"sourceSpatialReference",void 0),j=(0,R._)([(0,V.j)("esri.tasks.QueryTask")],j);const ie=j;var ue=i(20514),le=i(65234);const de=new T.X({originalAndCurrentFeatures:"original-and-current-features",none:"none"});function yt(){return(yt=(0,p.Z)(function*(r){return"string"==typeof r?(0,A.sJ)(r)||{data:r}:new Promise((t,e)=>{const s=new FileReader;s.readAsDataURL(r),s.onload=()=>t((0,A.sJ)(s.result)),s.onerror=n=>e(n)})})).apply(this,arguments)}const pe=new Set(["Feature Layer","Table"]);let N=class extends q.Z{constructor(){var r;super(...arguments),r=this,this.type="feature-layer",this.refresh=(0,Q.Ds)((0,p.Z)(function*(){var s,n;yield r.load();const t=null==(s=r.sourceJSON.editingInfo)?void 0:s.lastEditDate;if(null==t)return{dataChanged:!0,updates:{}};try{yield r._fetchService(null)}catch(l){return{dataChanged:!0,updates:{}}}const e=t!==(null==(n=r.sourceJSON.editingInfo)?void 0:n.lastEditDate);return{dataChanged:e,updates:e?{editingInfo:r.sourceJSON.editingInfo,extent:r.sourceJSON.extent}:null}}))}load(r){const t=(0,m.pC)(r)?r.signal:null;return this.addResolvingPromise(this._fetchService(this.layer.sourceJSON,t)),Promise.resolve(this)}get queryTask(){const{capabilities:{query:{supportsFormatPBF:r}},parsedUrl:t,dynamicDataSource:e,infoFor3D:s,gdbVersion:n,spatialReference:l,fieldsIndex:d}=this.layer,c=(0,_.Z)("featurelayer-pbf")&&r&&(0,m.Wi)(s)?"pbf":"json";return new ie({url:t.path,format:c,fieldsIndex:d,infoFor3D:s,dynamicDataSource:e,gdbVersion:n,sourceSpatialReference:l})}addAttachment(r,t){var e=this;return(0,p.Z)(function*(){yield e.load();const s=r.attributes[e.layer.objectIdField],n=e.layer.parsedUrl.path+"/"+s+"/addAttachment",l=e._getLayerRequestOptions(),d=e._getFormDataForAttachment(t,l.query);try{const c=yield(0,O.default)(n,{body:d});return e._createFeatureEditResult(c.data.addAttachmentResult)}catch(c){throw e._createAttachmentErrorResult(s,c)}})()}updateAttachment(r,t,e){var s=this;return(0,p.Z)(function*(){yield s.load();const n=r.attributes[s.layer.objectIdField],l=s.layer.parsedUrl.path+"/"+n+"/updateAttachment",d=s._getLayerRequestOptions({query:{attachmentId:t}}),c=s._getFormDataForAttachment(e,d.query);try{const y=yield(0,O.default)(l,{body:c});return s._createFeatureEditResult(y.data.updateAttachmentResult)}catch(y){throw s._createAttachmentErrorResult(n,y)}})()}applyEdits(r,t){var e=this;return(0,p.Z)(function*(){yield e.load();const s=r.addFeatures.map(e._serializeFeature,e),n=r.updateFeatures.map(e._serializeFeature,e),l=e._getFeatureIds(r.deleteFeatures,null==t?void 0:t.globalIdUsed);(0,ue.P)(s,n,e.layer.spatialReference);const d=[],c=[],y=[...r.deleteAttachments];for(const U of r.addAttachments)d.push(yield e._serializeAttachment(U));for(const U of r.updateAttachments)c.push(yield e._serializeAttachment(U));const h=d.length||c.length||y.length?{adds:d,updates:c,deletes:y}:null,f={gdbVersion:(null==t?void 0:t.gdbVersion)||e.layer.gdbVersion,rollbackOnFailure:null==t?void 0:t.rollbackOnFailureEnabled,useGlobalIds:null==t?void 0:t.globalIdUsed,returnEditMoment:null==t?void 0:t.returnEditMoment,usePreviousEditMoment:null==t?void 0:t.usePreviousEditMoment,sessionId:null==t?void 0:t.sessionId};(null==t?void 0:t.returnServiceEditsOption)?(f.edits=JSON.stringify([{id:e.layer.layerId,adds:s,updates:n,deletes:l,attachments:h}]),f.returnServiceEditsOption=de.toJSON(null==t?void 0:t.returnServiceEditsOption),f.returnServiceEditsInSourceSR=null==t?void 0:t.returnServiceEditsInSourceSR):(f.adds=s.length?JSON.stringify(s):null,f.updates=n.length?JSON.stringify(n):null,f.deletes=l.length?(null==t?void 0:t.globalIdUsed)?JSON.stringify(l):l.join(","):null,f.attachments=h&&JSON.stringify(h));const Z=e._getLayerRequestOptions({method:"post",query:f}),P=(null==t?void 0:t.returnServiceEditsOption)?e.layer.url:e.layer.parsedUrl.path,E=yield(0,O.default)(P+"/applyEdits",Z);return e._createEditsResult(E)})()}deleteAttachments(r,t){var e=this;return(0,p.Z)(function*(){yield e.load();const s=r.attributes[e.layer.objectIdField],n=e.layer.parsedUrl.path+"/"+s+"/deleteAttachments";try{return(yield(0,O.default)(n,e._getLayerRequestOptions({query:{attachmentIds:t.join(",")},method:"post"}))).data.deleteAttachmentResults.map(e._createFeatureEditResult)}catch(l){throw e._createAttachmentErrorResult(s,l)}})()}fetchRecomputedExtents(r={}){var t=this;return this.load({signal:r.signal}).then((0,p.Z)(function*(){const s=t._getLayerRequestOptions(g(u({},r),{query:{returnUpdates:!0}})),{layerId:n,url:l}=t.layer,{data:d}=yield(0,O.default)(`${l}/${n}`,s),{id:c,extent:y,fullExtent:h,timeExtent:f}=d,Z=y||h;return{id:c,fullExtent:Z&&W.Z.fromJSON(Z),timeExtent:f&&I.Z.fromJSON({start:f[0],end:f[1]})}}))}queryAttachments(r,t={}){var e=this;return(0,p.Z)(function*(){const{parsedUrl:s}=e.layer,n=s.path;yield e.load();const l=e._getLayerRequestOptions(t);if(!e.layer.get("capabilities.operations.supportsQueryAttachments")){const{objectIds:d}=r,c=[];for(const y of d)c.push((0,O.default)(n+"/"+y+"/attachments",l));return Promise.all(c).then(y=>d.map((h,f)=>({parentObjectId:h,attachmentInfos:y[f].data.attachmentInfos}))).then(y=>xt(y,n))}return e.queryTask.executeAttachmentQuery(r,l)})()}queryFeatures(r,t){var e=this;return(0,p.Z)(function*(){return yield e.load(),e.queryTask.execute(r,g(u({},t),{query:e._createRequestQueryOptions(t)}))})()}queryFeaturesJSON(r,t){var e=this;return(0,p.Z)(function*(){return yield e.load(),e.queryTask.executeJSON(r,g(u({},t),{query:e._createRequestQueryOptions(t)}))})()}queryObjectIds(r,t){var e=this;return(0,p.Z)(function*(){return yield e.load(),e.queryTask.executeForIds(r,g(u({},t),{query:e._createRequestQueryOptions(t)}))})()}queryFeatureCount(r,t){var e=this;return(0,p.Z)(function*(){return yield e.load(),e.queryTask.executeForCount(r,g(u({},t),{query:e._createRequestQueryOptions(t)}))})()}queryExtent(r,t){var e=this;return(0,p.Z)(function*(){return yield e.load(),e.queryTask.executeForExtent(r,g(u({},t),{query:e._createRequestQueryOptions(t)}))})()}queryRelatedFeatures(r,t){var e=this;return(0,p.Z)(function*(){return yield e.load(),e.queryTask.executeRelationshipQuery(r,g(u({},t),{query:e._createRequestQueryOptions(t)}))})()}queryRelatedFeaturesCount(r,t){var e=this;return(0,p.Z)(function*(){return yield e.load(),e.queryTask.executeRelationshipQueryForCount(r,g(u({},t),{query:e._createRequestQueryOptions(t)}))})()}queryTopFeatures(r,t){var e=this;return(0,p.Z)(function*(){return yield e.load(),e.queryTask.executeTopFeaturesQuery(r,g(u({},t),{query:e._createRequestQueryOptions(t)}))})()}queryTopObjectIds(r,t){var e=this;return(0,p.Z)(function*(){return yield e.load(),e.queryTask.executeForTopIds(r,g(u({},t),{query:e._createRequestQueryOptions(t)}))})()}queryTopExtents(r,t){var e=this;return(0,p.Z)(function*(){return yield e.load(),e.queryTask.executeForTopExtents(r,g(u({},t),{query:e._createRequestQueryOptions(t)}))})()}queryTopCount(r,t){var e=this;return(0,p.Z)(function*(){return yield e.load(),e.queryTask.executeForTopCount(r,g(u({},t),{query:e._createRequestQueryOptions(t)}))})()}_createRequestQueryOptions(r){const t=u(g(u({},this.layer.customParameters),{token:this.layer.apiKey}),null==r?void 0:r.query);return this.layer.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t}_fetchService(r,t){var e=this;return(0,p.Z)(function*(){if(!r){const{data:n}=yield(0,O.default)(e.layer.parsedUrl.path,e._getLayerRequestOptions({query:(0,_.Z)("featurelayer-advanced-symbols")?{returnAdvancedSymbols:!0}:{},signal:t}));r=n}e.sourceJSON=e._patchServiceJSON(r);const s=r.type;if(!pe.has(s))throw new v.Z("feature-layer-source:unsupported-type",`Source type "${s}" is not supported`)})()}_patchServiceJSON(r){var t;if("Table"!==r.type&&r.geometryType&&!(null==(t=null==r?void 0:r.drawingInfo)?void 0:t.renderer)&&!r.defaultSymbol){const e=(0,_t.bU)(r.geometryType).renderer;(0,b.RB)("drawingInfo.renderer",e,r)}return"esriGeometryMultiPatch"===r.geometryType&&r.infoFor3D&&(r.geometryType="mesh"),r}_serializeFeature(r){const{geometry:t,attributes:e}=r;return(0,m.Wi)(t)?{attributes:e}:"mesh"===t.type||"extent"===t.type?null:{geometry:t.toJSON(),attributes:e}}_serializeAttachment(r){var t=this;return(0,p.Z)(function*(){const{feature:e,attachment:s}=r,{globalId:n,name:l,contentType:d,data:c,uploadId:y}=s,h={globalId:n,parentGlobalId:null,contentType:null,name:null,uploadId:null,data:null};if(e&&(h.parentGlobalId="attributes"in e?e.attributes&&e.attributes[t.layer.globalIdField]:e.globalId),y)h.uploadId=y;else if(c){const f=yield function ce(r){return yt.apply(this,arguments)}(c);h.contentType=f.mediaType,h.data=f.data,c instanceof File&&(h.name=c.name)}return l&&(h.name=l),d&&(h.contentType=d),h})()}_getFeatureIds(r,t){const e=r[0];return e?this._canUseGlobalIds(t,r)?this._getGlobalIdsFromFeatureIdentifier(r):"objectId"in e?this._getObjectIdsFromFeatureIdentifier(r):this._getIdsFromFeatures(r):[]}_getIdsFromFeatures(r){const t=this.layer.objectIdField;return r.map(e=>e.attributes&&e.attributes[t])}_canUseGlobalIds(r,t){return r&&"globalId"in t[0]}_getObjectIdsFromFeatureIdentifier(r){return r.map(t=>t.objectId)}_getGlobalIdsFromFeatureIdentifier(r){return r.map(t=>t.globalId)}_createEditsResult(r){const t=r.data,{layerId:e}=this.layer,s=[];let n=null;if(Array.isArray(t))for(const c of t)s.push({id:c.id,editedFeatures:c.editedFeatures}),c.id===e&&(n={addResults:c.addResults,updateResults:c.updateResults,deleteResults:c.deleteResults,attachments:c.attachments,editMoment:c.editMoment});else n=t;const l=null==n?void 0:n.attachments,d={addFeatureResults:n.addResults?n.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:n.updateResults?n.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:n.deleteResults?n.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:l&&l.addResults?l.addResults.map(this._createFeatureEditResult,this):[],updateAttachmentResults:l&&l.updateResults?l.updateResults.map(this._createFeatureEditResult,this):[],deleteAttachmentResults:l&&l.deleteResults?l.deleteResults.map(this._createFeatureEditResult,this):[]};if(n.editMoment&&(d.editMoment=n.editMoment),s.length>0){d.editedFeatureResults=[];for(const c of s){const{adds:y,updates:h,deletes:f,spatialReference:Z}=c.editedFeatures,P=Z?new le.Z(Z):null;d.editedFeatureResults.push({layerId:c.id,editedFeatures:{adds:(null==y?void 0:y.map(E=>this._createEditedFeature(E,P)))||[],updates:(null==h?void 0:h.map(E=>({original:this._createEditedFeature(E[0],P),current:this._createEditedFeature(E[1],P)})))||[],deletes:(null==f?void 0:f.map(E=>this._createEditedFeature(E,P)))||[],spatialReference:P}})}}return d}_createEditedFeature(r,t){return new C.Z({attributes:r.attributes,geometry:(0,ht.im)(g(u({},r.geometry),{spatialReference:t}))})}_createFeatureEditResult(r){const t=!0===r.success?null:r.error||{code:void 0,description:void 0};return{objectId:r.objectId,globalId:r.globalId,error:t?new v.Z("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_createAttachmentErrorResult(r,t){return{objectId:r,globalId:null,error:new v.Z("feature-layer-source:attachment-failure",t.details.messages&&t.details.messages[0]||t.message,{code:t.details.httpStatus||t.details.messageCode})}}_getFormDataForAttachment(r,t){const e=r instanceof FormData?r:r&&r.elements?new FormData(r):null;if(e)for(const s in t){const n=t[s];null!=n&&(e.set?e.set(s,n):e.append(s,n))}return e}_getLayerRequestOptions(r={}){const{parsedUrl:t,gdbVersion:e,dynamicDataSource:s}=this.layer;return g(u({},r),{query:u(g(u({gdbVersion:e,layer:s?JSON.stringify({source:s}):void 0},t.query),{f:"json"}),this._createRequestQueryOptions(r)),responseType:"json"})}};(0,R._)([(0,x.Cb)()],N.prototype,"type",void 0),(0,R._)([(0,x.Cb)({constructOnly:!0})],N.prototype,"layer",void 0),(0,R._)([(0,x.Cb)({readOnly:!0})],N.prototype,"queryTask",null),N=(0,R._)([(0,V.j)("esri.layers.graphics.sources.FeatureLayerSource")],N);const ye=N},56554:(S,F,i)=>{i.d(F,{Dm:()=>_,Hq:()=>T,MS:()=>q,bU:()=>O});var p=i(8314),R=i(58817),M=i(87757),C=i(24837);function O(m){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===m||"esriGeometryMultipoint"===m?C.I4:"esriGeometryPolyline"===m?C.ET:C.lF}}}const I=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let v=1;function _(m,b){if((0,p.Z)("esri-csp-restrictions"))return()=>u({[b]:null},m);try{let Q=`this.${b} = null;`;for(const x in m)Q+=`this${I.test(x)?`.${x}`:`["${x}"]`} = ${JSON.stringify(m[x])};`;const A=new Function(`\n      return class AttributesClass$${v++} {\n        constructor() {\n          ${Q};\n        }\n      }\n    `)();return()=>new A}catch(Q){return()=>u({[b]:null},m)}}function T(m={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,R.d9)(m)}}]}function q(m,b){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:m},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:b,supportsDelete:b,supportsEditing:b,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:b,supportsExceedsLimitStatistics:!0},query:M.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:b,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},90463:(S,F,i)=>{i.d(F,{P:()=>O});var p=i(15861),R=i(2618),M=i(20477),C=i(84952);function O(v,_,T){return I.apply(this,arguments)}function I(){return(I=(0,p.Z)(function*(v,_,T){const q=(0,R.en)(v);return(0,M.executeQueryForCount)(q,C.Z.from(_),u({},T)).then(m=>m.data.count)})).apply(this,arguments)}},24865:(S,F,i)=>{i.d(F,{G:()=>O});var p=i(15861),R=i(2618),M=i(20477),C=i(84952);function O(v,_,T){return I.apply(this,arguments)}function I(){return(I=(0,p.Z)(function*(v,_,T){const q=(0,R.en)(v);return(0,M.executeQueryForIds)(q,C.Z.from(_),u({},T)).then(m=>m.data.objectIds)})).apply(this,arguments)}}}]);