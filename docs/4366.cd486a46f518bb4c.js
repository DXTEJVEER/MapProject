"use strict";(self.webpackChunkbeachSports=self.webpackChunkbeachSports||[]).push([[4366],{4366:(b,D,e)=>{e.r(D),e.d(D,{default:()=>O});var f=e(15861),l=e(17626),p=e(62208),T=e(10699),E=e(32917),h=(e(63290),e(90912),e(85931),e(8314),e(82255),e(76898)),R=e(69759),m=e(26584),c=e(77712),w=e(49672),n=e(13812),C=e(84952),v=e(10023);const L=a=>{let t=class extends a{constructor(){super(...arguments),this.view=null}fetchPopupFeatures(i,r){var o=this;return(0,f.Z)(function*(){const{layer:g}=o;if(!i)throw new m.Z("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:g});const{popupEnabled:d}=g,y=(0,v.V)(g,r);if(!d||(0,p.Wi)(y))throw new m.Z("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:d,popupTemplate:y});const U=yield y.getRequiredFields(),x=new C.Z;x.timeExtent=o.timeExtent,x.geometry=i,x.outFields=U,x.outSpatialReference=i.spatialReference;const I=o.view.resolution,V="2d"===o.view.type?new w.Z(I,I,o.view.spatialReference):new w.Z(.5*I,.5*I,o.view.spatialReference),{returnTopmostRaster:j,showNoDataRecords:H}=y.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},S={returnDomainValues:!0,returnTopmostRaster:j,pixelSize:V,showNoDataRecords:H,signal:(0,p.pC)(r)?r.signal:null};return g.queryVisibleRasters(x,S).then(W=>W)})()}canResume(){var i;return!!super.canResume()&&!(null==(i=this.timeExtent)?void 0:i.isEmpty)}};return(0,l._)([(0,c.Cb)()],t.prototype,"layer",void 0),(0,l._)([(0,c.Cb)()],t.prototype,"suspended",void 0),(0,l._)([(0,c.Cb)(n.qG)],t.prototype,"timeExtent",void 0),(0,l._)([(0,c.Cb)()],t.prototype,"view",void 0),t=(0,l._)([(0,h.j)("esri.views.layers.ImageryLayerView")],t),t};let F=class extends(L(R.Z)){constructor(){var a;super(...arguments),a=this,this.type="imagery-3d",this.redrawDebounced=(0,T.Ds)(function(){var t=(0,f.Z)(function*(i){a.redraw((r,o)=>a._redrawImage(r,o),i)});return function(i){return t.apply(this,arguments)}}(),2e3)}initialize(){this.handles.add([(0,E.gx)(()=>this.view.basemapTerrain.ready,()=>this._initializeMaximumDataResolution(),{once:!0,initial:!0}),this.layer.on("redraw",()=>this.updatingHandles.addPromise(this.redrawDebounced()))]),this.updatingHandles.add(()=>{var a,t;return null==(t=null==(a=this.layer)?void 0:a.exportImageServiceParameters)?void 0:t.version},()=>{this.updatingHandles.addPromise(this.refreshDebounced())}),this.updatingHandles.add(()=>this.timeExtent,()=>this.updatingHandles.addPromise(this.refreshDebounced()))}_initializeMaximumDataResolution(){const t=this.layer.fullExtent;!t||this.view.basemapTerrain.spatialReference.equals(t.spatialReference),this.maximumDataResolution={x:this.layer.pixelSizeX,y:this.layer.pixelSizeY}}getFetchOptions(){return{timeExtent:this.timeExtent}}processResult(a,t,i){var r=this;return(0,f.Z)(function*(){t.imageElement?a.image=t.imageElement:(a.image=document.createElement("canvas"),a.pixelData=t.pixelData,yield r._redrawImage(a,i))})()}_redrawImage(a,t){var i=this;return(0,f.Z)(function*(){if(!(a.image instanceof HTMLCanvasElement)||(0,p.Wi)(a.pixelData))throw new Error;const r=a.image,o=r.getContext("2d"),g=yield i.layer.applyRenderer(a.pixelData,{signal:t}),d=i.layer.applyFilter(g).pixelBlock;if((0,p.Wi)(d))throw new Error;r.width=d.width,r.height=d.height;const y=o.createImageData(d.width,d.height);y.data.set(d.getAsRGBA()),o.putImageData(y,0,0)})()}};F=(0,l._)([(0,h.j)("esri.views.3d.layers.ImageryLayerView3D")],F);const O=F},10023:(b,D,e)=>{e.d(D,{V:()=>M,e:()=>T});var f=e(15861),l=e(62208),p=e(36630);function T(s){return E.apply(this,arguments)}function E(){return(E=(0,f.Z)(function*(s,u=s.popupTemplate){if((0,l.Wi)(u))return[];const P=yield u.getRequiredFields(s.fieldsIndex),{lastEditInfoEnabled:Z}=u,{objectIdField:h,typeIdField:R,globalIdField:m,relationships:c}=s;if(P.includes("*"))return["*"];const w=Z?yield(0,p.CH)(s):[],n=(0,p.Q0)(s.fieldsIndex,[...P,...w]);return R&&n.push(R),n&&h&&s.fieldsIndex.has(h)&&!n.includes(h)&&n.push(h),n&&m&&s.fieldsIndex.has(m)&&!n.includes(m)&&n.push(m),c&&c.forEach(C=>{const{keyField:v}=C;n&&v&&s.fieldsIndex.has(v)&&!n.includes(v)&&n.push(v)}),n})).apply(this,arguments)}function M(s,u){return s.popupTemplate?s.popupTemplate:(0,l.pC)(u)&&u.defaultPopupTemplateEnabled&&(0,l.pC)(s.defaultPopupTemplate)?s.defaultPopupTemplate:null}}}]);