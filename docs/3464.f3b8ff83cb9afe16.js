"use strict";var he=Object.defineProperty,ye=Object.defineProperties,_e=Object.getOwnPropertyDescriptors,le=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,ce=(K,j,a)=>j in K?he(K,j,{enumerable:!0,configurable:!0,writable:!0,value:a}):K[j]=a,se=(K,j)=>{for(var a in j||(j={}))me.call(j,a)&&ce(K,a,j[a]);if(le)for(var a of le(j))ge.call(j,a)&&ce(K,a,j[a]);return K},de=(K,j)=>ye(K,_e(j));(self.webpackChunkbeachSports=self.webpackChunkbeachSports||[]).push([[3464],{14259:(K,j,a)=>{a.d(j,{q:()=>R});var S,w,H={exports:{}};S=H,void 0!==(w=function(){function D(s,n,o,p,I){for(;p>o;){if(p-o>600){var y=p-o+1,_=n-o+1,O=Math.log(y),h=.5*Math.exp(2*O/3),C=.5*Math.sqrt(O*h*(y-h)/y)*(_-y/2<0?-1:1);D(s,n,Math.max(o,Math.floor(n-_*h/y+C)),Math.min(p,Math.floor(n+(y-_)*h/y+C)),I)}var W=s[n],A=o,B=p;for(x(s,o,n),I(s[p],W)>0&&x(s,o,p);A<B;){for(x(s,A,B),A++,B--;I(s[A],W)<0;)A++;for(;I(s[B],W)>0;)B--}0===I(s[o],W)?x(s,o,B):x(s,++B,p),B<=n&&(o=B+1),n<=B&&(p=B-1)}}function x(s,n,o){var p=s[n];s[n]=s[o],s[o]=p}function P(s,n){return s<n?-1:s>n?1:0}return function F(s,n,o,p,I){D(s,n,o||0,p||s.length-1,I||P)}}())&&(S.exports=w);const R=H.exports},77044:(K,j,a)=>{a.d(j,{Y:()=>w});var S=a(62208);function Y(s,n){return s?n?4:3:n?3:2}function w(s,n,o,p,I){if((0,S.Wi)(n)||!n.lengths.length)return null;const y="upperLeft"===(null==I?void 0:I.originPosition)?-1:1;s.lengths.length&&(s.lengths.length=0),s.coords.length&&(s.coords.length=0);const _=s.coords,O=[],h=o?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:C,coords:W}=n,A=Y(o,p);let B=0;for(const T of C){const Z=H(h,W,B,T,o,p,y);Z&&O.push(Z),B+=T*A}if(O.sort((T,Z)=>{let z=y*T[2]-y*Z[2];return 0===z&&o&&(z=T[4]-Z[4]),z}),O.length){let T=6*O[0][2];_[0]=O[0][0]/T,_[1]=O[0][1]/T,o&&(T=6*O[0][4],_[2]=0!==T?O[0][3]/T:0),(_[0]<h[0]||_[0]>h[1]||_[1]<h[2]||_[1]>h[3]||o&&(_[2]<h[4]||_[2]>h[5]))&&(_.length=0)}if(!_.length){const T=n.lengths[0]?function R(s,n,o,p,I){const y=Y(p,I);let _=n,O=n+y,h=0,C=0,W=0,A=0;for(let B=0,T=o-1;B<T;B++,_+=y,O+=y){const Z=s[_],z=s[_+1],b=s[_+2],te=s[O],l=s[O+1],c=s[O+2],g=p?D(Z,z,b,te,l,c):F(Z,z,te,l);if(g)if(h+=g,p){const v=P(Z,z,b,te,l,c);C+=g*v[0],W+=g*v[1],A+=g*v[2]}else{const v=x(Z,z,te,l);C+=g*v[0],W+=g*v[1]}}return h>0?p?[C/h,W/h,A/h]:[C/h,W/h]:o>0?p?[s[n],s[n+1],s[n+2]]:[s[n],s[n+1]]:null}(W,0,C[0],o,p):null;if(!T)return null;_[0]=T[0],_[1]=T[1],o&&T.length>2&&(_[2]=T[2])}return s}function H(s,n,o,p,I,y,_=1){const O=Y(I,y);let h=o,C=o+O,W=0,A=0,B=0,T=0,Z=0;for(let b=0,te=p-1;b<te;b++,h+=O,C+=O){const l=n[h],c=n[h+1],g=n[h+2],v=n[C],M=n[C+1],N=n[C+2];let Q=l*M-v*c;T+=Q,W+=(l+v)*Q,A+=(c+M)*Q,I&&(Q=l*N-v*g,B+=(g+N)*Q,Z+=Q),l<s[0]&&(s[0]=l),l>s[1]&&(s[1]=l),c<s[2]&&(s[2]=c),c>s[3]&&(s[3]=c),I&&(g<s[4]&&(s[4]=g),g>s[5]&&(s[5]=g))}if(T*_>0&&(T*=-1),Z*_>0&&(Z*=-1),!T)return null;const z=[W,A,.5*T];return I&&(z[3]=B,z[4]=.5*Z),z}function F(s,n,o,p){const I=o-s,y=p-n;return Math.sqrt(I*I+y*y)}function D(s,n,o,p,I,y){const _=p-s,O=I-n,h=y-o;return Math.sqrt(_*_+O*O+h*h)}function x(s,n,o,p){return[s+.5*(o-s),n+.5*(p-n)]}function P(s,n,o,p,I,y){return[s+.5*(p-s),n+.5*(I-n),o+.5*(y-o)]}},58175:(K,j,a)=>{a.d(j,{q:()=>g});var S=a(15861),Y=a(85931),w=a(26584),H=a(58817),R=a(62208),F=a(1036),D=a(16730),x=a(5548),P=a(65401),s=a(32442),n=a(91179),o=a(13924),p=a(37053),I=a(82054),y=a(50736),_=a(82959),O=a(87757),h=a(83308),C=a(53023),W=a(76530),A=a(6185),B=a(60466),T=a(46679),Z=a(87091);const b="feature-store:unsupported-query",l=new F.WJ(2e6);let c=0;class g{constructor(e){this.capabilities={query:O.g},this.geometryType=e.geometryType,this.hasM=e.hasM,this.hasZ=e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.featureStore=e.featureStore,this.aggregateAdapter=e.aggregateAdapter,this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache()),this.timeInfo=e.timeInfo,e.cacheSpatialQueries&&(this._geometryQueryCache=new F.Xq(c+++"$$",l)),this.fieldsIndex=new B.Z(e.fields),e.scheduler&&e.priority&&(this._frameTask=e.scheduler.registerTask(e.priority))}destroy(){this._frameTask=(0,R.hw)(this._frameTask),this.clearCache(),(0,R.SC)(this._geometryQueryCache),this._changeHandle=(0,R.hw)(this._changeHandle),(0,R.SC)(this.fieldsIndex)}get featureAdapter(){return this.featureStore.featureAdapter}get fullExtent(){const e=this.featureStore.fullBounds;return(0,R.Wi)(e)?null:{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:(0,A.S2)(this.spatialReference)}}get timeExtent(){return this.timeInfo?(this._timeExtent||(this._timeExtent=(0,W.R)(this.timeInfo,this.featureStore)),this._timeExtent):null}clearCache(){var e;null==(e=this._geometryQueryCache)||e.clear(),this._allItems=null,this._timeExtent=null}executeQuery(e,i){var t=this;return(0,S.Z)(function*(){try{return(yield t._executeQuery(e,{},i)).createQueryResponse()}catch(r){if(r!==A.vF)throw r;return new h.y([],e,t).createQueryResponse()}})()}executeQueryForCount(e={},i){var t=this;return(0,S.Z)(function*(){try{return(yield t._executeQuery(e,{returnGeometry:!1,returnCentroid:!1,outSR:null},i)).createQueryResponseForCount()}catch(r){if(r!==A.vF)throw r;return 0}})()}executeQueryForExtent(e,i){var t=this;return(0,S.Z)(function*(){const r=e.outSR;try{const u=yield t._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},i),d=u.size;if(!d)return{count:0,extent:null};(0,x.t8)(M,x.Gv),t.featureStore.forEachBounds(u.items,E=>(0,x.TC)(M,E),v);const m={xmin:M[0],ymin:M[1],xmax:M[3],ymax:M[4],spatialReference:(0,A.S2)(t.spatialReference)};t.hasZ&&isFinite(M[2])&&isFinite(M[5])&&(m.zmin=M[2],m.zmax=M[5]);const f=(0,_.iV)(m,u.spatialReference,r);if(f.spatialReference=(0,A.S2)(r||t.spatialReference),f.xmax-f.xmin==0){const E=(0,D.c9)(f.spatialReference);f.xmin-=E,f.xmax+=E}if(f.ymax-f.ymin==0){const E=(0,D.c9)(f.spatialReference);f.ymin-=E,f.ymax+=E}if(t.hasZ&&null!=f.zmin&&null!=f.zmax&&f.zmax-f.zmin==0){const E=(0,D.c9)(f.spatialReference);f.zmin-=E,f.zmax+=E}return{count:d,extent:f}}catch(u){if(u===A.vF)return{count:0,extent:null};throw u}})()}executeQueryForIds(e,i){var t=this;return(0,S.Z)(function*(){return t.executeQueryForIdSet(e,i).then(r=>Array.from(r))})()}executeQueryForIdSet(e,i){var t=this;return(0,S.Z)(function*(){try{const r=yield t._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},i),u=r.items,d=new Set;return yield t._reschedule(()=>{for(const m of u)d.add(r.featureAdapter.getObjectId(m))},i),d}catch(r){if(r===A.vF)return new Set;throw r}})()}executeQueryForSnapping(e,i){var t=this;return(0,S.Z)(function*(){const{point:r,distance:u,types:d}=e;if(d===h.r.NONE)return{candidates:[]};const m=yield t._reschedule(()=>t._checkQuerySupport(e.query),i),f=!(0,p.fS)(r.spatialReference,t.spatialReference);f&&(yield(0,_._W)(r.spatialReference,t.spatialReference));const E="number"==typeof u?u:u.x,U="number"==typeof u?u:u.y,G={xmin:r.x-E,xmax:r.x+E,ymin:r.y-U,ymax:r.y+U,spatialReference:r.spatialReference},V=f?(0,_.iV)(G,t.spatialReference):G;if(!V)return{candidates:[]};const $=(yield(0,o.aX)((0,n.im)(r),null,{signal:i}))[0],k=(yield(0,o.aX)((0,n.im)(V),null,{signal:i}))[0];if((0,R.Wi)($)||(0,R.Wi)(k))return{candidates:[]};const re=new h.y(t._searchFeatures(t._getQueryBBoxes(k.toJSON())),m,t);yield t._reschedule(()=>t._executeObjectIdsQuery(re),i),yield t._reschedule(()=>t._executeTimeQuery(re),i),yield t._reschedule(()=>t._executeAttributesQuery(re),i);const L=$.toJSON(),q=f?(0,_.iV)(L,t.spatialReference):L,ee=f?Math.max(V.xmax-V.xmin,V.ymax-V.ymin)/2:u;return re.createSnappingResponse(de(se({},e),{point:q,distance:ee}),r.spatialReference)})()}executeQueryForLatestObservations(e,i){var t=this;return(0,S.Z)(function*(){if(!t.timeInfo||!t.timeInfo.trackIdField)throw new w.Z(b,"Missing timeInfo or timeInfo.trackIdField",{query:e,timeInfo:t.timeInfo});try{const r=yield t._executeQuery(e,{},i);return yield t._reschedule(()=>t._filterLatest(r),i),r.createQueryResponse()}catch(r){if(r!==A.vF)throw r;return new h.y([],e,t).createQueryResponse()}})()}executeQueryForSummaryStatistics(e={},i,t){var r=this;return(0,S.Z)(function*(){const{field:u,normalizationField:d,valueExpression:m}=i;return(yield r._getQueryEngineResultForStats(e,{field:u,normalizationField:d,valueExpression:m},t)).createSummaryStatisticsResponse(i)})()}executeQueryForUniqueValues(e={},i,t){var r=this;return(0,S.Z)(function*(){const{field:u,valueExpression:d}=i;return(yield r._getQueryEngineResultForStats(e,{field:u,valueExpression:d},t)).createUniqueValuesResponse(i)})()}executeQueryForClassBreaks(e={},i,t){var r=this;return(0,S.Z)(function*(){const{field:u,normalizationField:d,valueExpression:m}=i;return(yield r._getQueryEngineResultForStats(e,{field:u,normalizationField:d,valueExpression:m},t)).createClassBreaksResponse(i)})()}executeQueryForHistogram(e={},i,t){var r=this;return(0,S.Z)(function*(){const{field:u,normalizationField:d,valueExpression:m}=i;return(yield r._getQueryEngineResultForStats(e,{field:u,normalizationField:d,valueExpression:m},t)).createHistogramResponse(i)})()}_schedule(e,i){var t=this;return(0,S.Z)(function*(){return(0,R.pC)(t._frameTask)?t._frameTask.schedule(e,i):e(Z.G5)})()}_reschedule(e,i){var t=this;return(0,S.Z)(function*(){return(0,R.pC)(t._frameTask)?t._frameTask.reschedule(e,i):e(Z.G5)})()}_getAll(e){return(0,R.Wi)(this._allItems)&&(this._allItems=this.featureStore.toArray()),new h.y(this._allItems,e,this)}_executeQuery(e,i,t){var r=this;return(0,S.Z)(function*(){e=(0,H.d9)(e),e=yield r._schedule(()=>(0,A.Up)(e,r.definitionExpression,r.spatialReference),t),e=yield r._reschedule(()=>r._checkQuerySupport(e),t),e=se(se({},e),i);const u=yield r._reschedule(()=>r._executeSceneFilterQuery(e,t),t),d=yield r._reschedule(()=>r._executeGeometryQuery(e,u,t),t);return yield r._reschedule(()=>r._executeAggregateIdsQuery(d),t),yield r._reschedule(()=>r._executeObjectIdsQuery(d),t),yield r._reschedule(()=>r._executeTimeQuery(d),t),yield r._reschedule(()=>r._executeAttributesQuery(d),t),d})()}_executeSceneFilterQuery(e,i){var t=this;return(0,S.Z)(function*(){if((0,R.Wi)(e.sceneFilter))return null;const{outSR:r,returnGeometry:u,returnCentroid:d}=e,m=t.featureStore.featureSpatialReference,f=e.sceneFilter.geometry,E=(0,R.Wi)(m)||(0,p.fS)(m,f.spatialReference)?f:(0,_.iV)(f,m);if(!E)return null;const U=u||d,G=(0,p.JY)(r)&&!(0,p.fS)(t.spatialReference,r)&&U?function(){var L=(0,S.Z)(function*(q){return t._project(q,r)});return function(q){return L.apply(this,arguments)}}():L=>L,V=t.featureAdapter,$=t._searchFeatures(t._getQueryBBoxes(E));if("disjoint"===e.sceneFilter.spatialRelationship){if(!$.length)return null;const L=new Set;for(const ie of $)L.add(V.getObjectId(ie));const q=yield t._reschedule(()=>t.featureStore.toArray(),i);return G(yield t._reschedule((0,S.Z)(function*(){const ie=yield(0,C.cW)("esriSpatialRelDisjoint",E,t.geometryType,t.hasZ,t.hasM),J=yield t._runSpatialFilter(q,X=>!L.has(V.getObjectId(X))||ie(V.getGeometry(X)),i);return new h.y(J,e,t)}),i))}if(!$.length)return new h.y([],e,t);if(t._canExecuteSinglePass(E,e))return G(new h.y($,e,t));const k=yield(0,C.cW)("esriSpatialRelContains",E,t.geometryType,t.hasZ,t.hasM),re=yield t._runSpatialFilter($,L=>k(V.getGeometry(L)),i);return G(new h.y(re,e,t))})()}_executeGeometryQuery(e,i,t){var r=this;return(0,S.Z)(function*(){if((0,R.pC)(i)&&0===i.items.length)return i;e=(0,R.pC)(i)?i.query:e;const{geometry:u,outSR:d,spatialRel:m,returnGeometry:f,returnCentroid:E}=e,U=r.featureStore.featureSpatialReference,G=!u||(0,R.Wi)(U)||(0,p.fS)(U,u.spatialReference)?u:(0,_.iV)(u,U),V=f||E,$=(0,p.JY)(d)&&!(0,p.fS)(r.spatialReference,d),k=r._geometryQueryCache&&(0,R.Wi)(i)?$&&V?JSON.stringify({originalFilterGeometry:u,spatialRelationship:m,outSpatialReference:d}):JSON.stringify({originalFilterGeometry:u,spatialRelationship:m}):null,re=k?r._geometryQueryCache.get(k):null;if((0,R.pC)(re))return new h.y(re,e,r);const L=function(){var J=(0,S.Z)(function*(X){return $&&V&&(yield r._project(X,d)),k&&r._geometryQueryCache.put(k,X.items,X.items.length+1),X});return function(ae){return J.apply(this,arguments)}}();if(!G)return L((0,R.pC)(i)?i:r._getAll(e));const q=r.featureAdapter;let ee=r._searchFeatures(r._getQueryBBoxes(u));if("esriSpatialRelDisjoint"===m){if(!ee.length)return L((0,R.pC)(i)?i:r._getAll(e));const J=new Set;for(const oe of ee)J.add(q.getObjectId(oe));const X=(0,R.pC)(i)?i.items:yield r._reschedule(()=>r.featureStore.toArray(),t);return L(yield r._reschedule((0,S.Z)(function*(){const oe=yield(0,C.cW)(m,G,r.geometryType,r.hasZ,r.hasM),pe=yield r._runSpatialFilter(X,ue=>!J.has(q.getObjectId(ue))||oe(q.getGeometry(ue)),t);return new h.y(pe,e,r)}),t))}if((0,R.pC)(i)){const J=new Y.SO;ee=ee.filter(X=>(0,Y.cq)(i.items,X,i.items.length,J)>=0)}if(!ee.length){const J=new h.y([],e,r);return k&&r._geometryQueryCache.put(k,J.items,1),J}if(r._canExecuteSinglePass(G,e))return L(new h.y(ee,e,r));const ie=yield(0,C.cW)(m,G,r.geometryType,r.hasZ,r.hasM),ne=yield r._runSpatialFilter(ee,J=>ie(q.getGeometry(J)),t);return L(new h.y(ne,e,r))})()}_executeAggregateIdsQuery(e){if(0===e.items.length||!e.query.aggregateIds||!e.query.aggregateIds.length||(0,R.Wi)(this.aggregateAdapter))return;const i=new Set;for(const r of e.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(r).forEach(u=>i.add(u));const t=this.featureAdapter.getObjectId;e.items=e.items.filter(r=>i.has(t(r)))}_executeObjectIdsQuery(e){if(0===e.items.length||!e.query.objectIds||!e.query.objectIds.length)return;const i=new Set(e.query.objectIds),t=this.featureAdapter.getObjectId;e.items=e.items.filter(r=>i.has(t(r)))}_executeTimeQuery(e){if(0===e.items.length)return;const i=(0,W.y)(this.timeInfo,e.query.timeExtent,this.featureAdapter);(0,R.Wi)(i)||(e.items=e.items.filter(i))}_executeAttributesQuery(e){if(0===e.items.length)return;const i=(0,y.Jc)(e.query.where,this.fieldsIndex);if(i){if(!i.isStandardized)throw new TypeError("Where clause is not standardized");e.items=e.items.filter(t=>i.testFeature(t,this.featureAdapter))}}_runSpatialFilter(e,i,t){var r=this;return(0,S.Z)(function*(){if(!i)return e;if((0,R.Wi)(r._frameTask))return e.filter(f=>i(f));let u=0;const d=new Array,m=function(){var f=(0,S.Z)(function*(E){for(;u<e.length;){const U=e[u++];i(U)&&(d.push(U),E.madeProgress()),E.done&&(yield r._reschedule(G=>m(G),t))}});return function(U){return f.apply(this,arguments)}}();return r._reschedule(f=>m(f),t).then(()=>d)})()}_filterLatest(e){const{trackIdField:i,startTimeField:t,endTimeField:r}=this.timeInfo,u=r||t,d=new Map,m=this.featureAdapter.getAttribute;for(const f of e.items){const E=m(f,i),U=m(f,u),G=d.get(E);(!G||U>m(G,u))&&d.set(E,f)}e.items=Array.from(d.values())}_canExecuteSinglePass(e,i){const{spatialRel:t}=i;return(0,C.hN)(e)&&("esriSpatialRelEnvelopeIntersects"===t||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===t||"esriSpatialRelContains"===t||"esriSpatialRelWithin"===t))}_project(e,i){var t=this;return(0,S.Z)(function*(){if(!i||(0,p.fS)(t.spatialReference,i))return e;const r=t.featureAdapter,u=yield(0,_.oj)(e.items.map(d=>(0,A.Op)(t.geometryType,t.hasZ,t.hasM,r.getGeometry(d))),t.spatialReference,i);return e.items=u.map((d,m)=>r.cloneWithGeometry(e.items[m],(0,I.GH)(d,t.hasZ,t.hasM))),e})()}_getQueryBBoxes(e){if((0,C.hN)(e)){if((0,n.YX)(e))return[(0,P.al)(e.xmin,e.ymin,e.xmax,e.ymax)];if((0,n.oU)(e))return e.rings.map(i=>(0,P.al)(Math.min(i[0][0],i[2][0]),Math.min(i[0][1],i[2][1]),Math.max(i[0][0],i[2][0]),Math.max(i[0][1],i[2][1])))}return[(0,s.$P)((0,P.Ue)(),e)]}_searchFeatures(e){for(const t of e)this.featureStore.forEachInBounds(t,r=>N.add(r));const i=Array.from(N.values());return N.clear(),i}_checkStatisticsSupport(e,i){var t=this;return(0,S.Z)(function*(){if(e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text||e.outStatistics||e.groupByFieldsForStatistics||e.having||e.orderByFields)throw new w.Z(b,"Unsupported query options",{query:e});return t._checkAttributesQuerySupport(e),Promise.all([t._checkStatisticsParamsSupport(i),(0,C.P0)(e,t.geometryType,t.spatialReference),(0,_._W)(t.spatialReference,e.outSR)]).then(()=>e)})()}_checkStatisticsParamsSupport(e){var i=this;return(0,S.Z)(function*(){let t=[];if(e.valueExpression){const{arcadeUtils:r}=yield(0,T.LC)();t=r.extractFieldNames(e.valueExpression)}if(e.field&&t.push(e.field),e.normalizationField&&t.push(e.normalizationField),!t.length)throw new w.Z(b,"params should have at least a field or valueExpression",{params:e});(0,y.Of)(i.fieldsIndex,t,"params contains missing fields")})()}_checkQuerySupport(e){var i=this;return(0,S.Z)(function*(){if(e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text)throw new w.Z(b,"Unsupported query options",{query:e});return i._checkAttributesQuerySupport(e),i._checkStatisticsQuerySupport(e),Promise.all([(0,C.P0)(e,i.geometryType,i.spatialReference),(0,_._W)(i.spatialReference,e.outSR)]).then(()=>e)})()}_checkAttributesQuerySupport(e){const{outFields:i,orderByFields:t,returnDistinctValues:r,outStatistics:u}=e,d=u?u.map(m=>m.outStatisticFieldName&&m.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(t&&t.length>0){const m=" asc",f=" desc",E=t.map(U=>{const G=U.toLowerCase();return G.includes(m)?G.split(m)[0]:G.includes(f)?G.split(f)[0]:U}).filter(U=>!d.includes(U));(0,y.Of)(this.fieldsIndex,E,"orderByFields contains missing fields")}if(i&&i.length>0)(0,y.Of)(this.fieldsIndex,i,"outFields contains missing fields");else if(r)throw new w.Z(b,"outFields should be specified for returnDistinctValues",{query:e});(0,y.hO)(this.fieldsIndex,e.where)}_checkStatisticsQuerySupport(e){const{outStatistics:i,groupByFieldsForStatistics:t,having:r}=e,u=t&&t.length,d=i&&i.length;if(r){if(!u||!d)throw new w.Z(b,"outStatistics and groupByFieldsForStatistics should be specified with having",{query:e});(0,y.z4)(this.fieldsIndex,r,i)}if(d){if(!function z(Q){return Q.every(e=>"exceedslimit"!==e.statisticType)}(i))return;const m=i.map(f=>f.onStatisticField).filter(Boolean);(0,y.Of)(this.fieldsIndex,m,"onStatisticFields contains missing fields"),u&&(0,y.Of)(this.fieldsIndex,t,"groupByFieldsForStatistics contains missing fields");for(const f of i){const{onStatisticField:E,statisticType:U}=f;if("percentile_disc"!==U&&"percentile_cont"!==U||!("statisticParameters"in f)){if("count"!==U&&E&&(0,y.G3)(E,this.fieldsIndex))throw new w.Z(b,"outStatistics contains non-numeric fields",{definition:f,query:e})}else{const{statisticParameters:G}=f;if(!G)throw new w.Z(b,"statisticParamters should be set for percentile type",{definition:f,query:e})}}}}_getQueryEngineResultForStats(e,i,t){var r=this;return(0,S.Z)(function*(){e=(0,H.d9)(e);try{e=yield r._schedule(()=>(0,A.Up)(e,r.definitionExpression,r.spatialReference),t),e=yield r._reschedule(()=>r._checkStatisticsSupport(e,i),t);const u=yield r._reschedule(()=>r._executeSceneFilterQuery(e,t),t),d=yield r._reschedule(()=>r._executeGeometryQuery(e,u,t),t);return yield r._reschedule(()=>r._executeAggregateIdsQuery(d),t),yield r._reschedule(()=>r._executeObjectIdsQuery(d),t),yield r._reschedule(()=>r._executeTimeQuery(d),t),yield r._reschedule(()=>r._executeAttributesQuery(d),t),d}catch(u){if(u!==A.vF)throw u;return new h.y([],e,r)}})()}}const v=(0,x.Ue)(),M=(0,x.Ue)(),N=new Set},87757:(K,j,a)=>{a.d(j,{g:()=>S});const S={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},53023:(K,j,a)=>{a.d(j,{hN:()=>te,P0:()=>z,cW:()=>Z});var S=a(15861),Y=a(26584),w=a(33190),H=a(11519),F=a(91179),D=a(37053);function x(l,c){return l?c?4:3:c?3:2}function n(l,c,g,v,M){if(!l)return!1;const N=x(c,g),{coords:Q,lengths:e}=l;let i=!1,t=0;for(const r of e)i=o(i,Q,N,t,r,v,M),t+=r*N;return i}function o(l,c,g,v,M,N,Q){let e=l,i=v;for(let t=v,r=v+M*g;t<r;t+=g){i=t+g,i===r&&(i=v);const u=c[t],d=c[t+1],m=c[i],f=c[i+1];(d<Q&&f>=Q||f<Q&&d>=Q)&&u+(Q-d)/(f-d)*(m-u)<N&&(e=!e)}return e}var p=a(82054),I=a(88071),y=a(82959),_=a(6185);const O="feature-store:unsupported-query",h={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},C_spatialRelationship={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},C_queryGeometry={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},C_layerGeometry={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function W(l){return!0===C_spatialRelationship[l]}function A(l){return!0===C_queryGeometry[(0,F.Ji)(l)]}function B(l){return!0===C_layerGeometry[l]}function Z(l,c,g,v,M){if((0,F.oU)(c)&&"esriGeometryPoint"===g&&("esriSpatialRelIntersects"===l||"esriSpatialRelContains"===l)){const N=(0,p.Uy)(new I.Z,c,!1,!1);return Promise.resolve(Q=>function P(l,c,g,v){return n(l,c,g,v.coords[0],v.coords[1])}(N,!1,!1,Q))}if((0,F.oU)(c)&&"esriGeometryMultipoint"===g){const N=(0,p.Uy)(new I.Z,c,!1,!1);if("esriSpatialRelContains"===l)return Promise.resolve(Q=>function s(l,c,g,v,M,N){const Q=x(M,N),{coords:e,lengths:i}=v;if(!i)return!1;for(let t=0,r=0;t<i.length;t++,r+=Q)if(!n(l,c,g,e[r],e[r+1]))return!1;return!0}(N,!1,!1,Q,v,M))}if((0,F.YX)(c)&&"esriGeometryPoint"===g&&("esriSpatialRelIntersects"===l||"esriSpatialRelContains"===l))return Promise.resolve(N=>(0,w.aV)(c,(0,_.Op)(g,v,M,N)));if((0,F.YX)(c)&&"esriGeometryMultipoint"===g&&"esriSpatialRelContains"===l)return Promise.resolve(N=>(0,w.lQ)(c,(0,_.Op)(g,v,M,N)));if((0,F.YX)(c)&&"esriSpatialRelIntersects"===l){const N=function R(l){return"mesh"===l?H.h_:(0,H.IY)(l)}(g);return Promise.resolve(Q=>N(c,(0,_.Op)(g,v,M,Q)))}return function T(){return Promise.all([a.e(4918),a.e(8592),a.e(2825)]).then(a.bind(a,32825))}().then(N=>{const Q=N[h[l]].bind(null,c.spatialReference,c);return e=>Q((0,_.Op)(g,v,M,e))})}function z(l,c,g){return b.apply(this,arguments)}function b(){return(b=(0,S.Z)(function*(l,c,g){const{spatialRel:v,geometry:M}=l;if(M){if(!W(v))throw new Y.Z(O,"Unsupported query spatial relationship",{query:l});if((0,D.JY)(M.spatialReference)&&(0,D.JY)(g)){if(!A(M))throw new Y.Z(O,"Unsupported query geometry type",{query:l});if(!B(c))throw new Y.Z(O,"Unsupported layer geometry type",{query:l});if(l.outSR)return(0,y._W)(l.geometry&&l.geometry.spatialReference,l.outSR)}}})).apply(this,arguments)}function te(l){if((0,F.YX)(l))return!0;if((0,F.oU)(l)){for(const c of l.rings)if(5!==c.length||c[0][0]!==c[1][0]||c[0][0]!==c[4][0]||c[2][0]!==c[3][0]||c[0][1]!==c[3][1]||c[0][1]!==c[4][1]||c[1][1]!==c[2][1])return!1;return!0}return!1}},76530:(K,j,a)=>{function S(F,D){if(!F)return null;const x=D.featureAdapter,{startTimeField:P,endTimeField:s}=F;let n=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;if(P&&s)D.forEach(p=>{const I=x.getAttribute(p,P),y=x.getAttribute(p,s);null==I||isNaN(I)||(n=Math.min(n,I)),null==y||isNaN(y)||(o=Math.max(o,y))});else{const p=P||s;D.forEach(I=>{const y=x.getAttribute(I,p);null==y||isNaN(y)||(n=Math.min(n,y),o=Math.max(o,y))})}return{start:n,end:o}}function Y(F,D,x){if(!D||!F)return null;const{startTimeField:P,endTimeField:s}=F;if(!P&&!s)return null;const{start:n,end:o}=D;return null===n&&null===o?null:void 0===n&&void 0===o?()=>!1:P&&s?function w(F,D,x,P,s){return null!=P&&null!=s?n=>{const o=F.getAttribute(n,D),p=F.getAttribute(n,x);return(null==o||o<=s)&&(null==p||p>=P)}:null!=P?n=>{const o=F.getAttribute(n,x);return null==o||o>=P}:null!=s?n=>{const o=F.getAttribute(n,D);return null==o||o<=s}:void 0}(x,P,s,n,o):function H(F,D,x,P){return null!=x&&null!=P&&x===P?s=>F.getAttribute(s,D)===x:null!=x&&null!=P?s=>{const n=F.getAttribute(s,D);return n>=x&&n<=P}:null!=x?s=>F.getAttribute(s,D)>=x:null!=P?s=>F.getAttribute(s,D)<=P:void 0}(x,P||s,n,o)}a.d(j,{R:()=>S,y:()=>Y})}}]);